<?xml version="1.0" encoding="ISO-8859-1" ?>
<interface id="maestro" version="1.3.2">

    <!-- Result files that should always be downloaded -->
        <download>
<!--            <source type="folder" name="mzTab/"/>-->
        </download>

<!--**************RESULT VIEWS**************************-->
        <view id="search_result_summary" label="Search Result Summary">
                <blockRef id="main" type="summary_report_new_plaintext"/>
        </view>
        <view id="identified_clusters" label="Identified Clusters" group="Overall Views">
            <blockRef id="main" type="combined_spectrum_fdr_list_new"/>
        </view>
        <view id="clustersNew_spectrumFdr_sliced" display="hidden">
            <blockRef id="main" type="combined_spectrum_fdr_list_new_sliced"/>
        </view>
        <view id="clustersNew_spectrumFdr_sepMixtures" display="hidden">
            <blockRef id="main" type="combined_spectrum_fdr_list_sepMixtures_new"/>
        </view>
        <view id="identified_variants_merged_protein_regions" label="Identified Peptide Variants" group="Overall Views">
            <blockRef id="main" type="combined_variant_merged_fdr_regions_new"/>
        </view>
        <view id="identified_variants" label="Identified Peptide Variants by Protein Region" group="Overall Views">
            <blockRef id="main" type="combined_variant_fdr_regions_new"/>
        </view>
        <view id="identified_proteins" label="Identified Proteins (Variant FDR)" group="Overall Views">
                <blockRef id="main" type="protein_list_overall"/>
        </view>
        <view id="view_all_annotations_DB" display="hidden">
                <blockRef id="main"   type="view_all_annotations_DB"/>
        </view>
        <view id="identified_protein_regions" label="Identified Protein Regions" group="Overall Views">
            <blockRef id="main" type="combined_bsaap_regions"/>
        </view>
       <view id="cluster_details" display="hidden">
                <blockRef id="main" type="results_per_cluster"/>
        </view>
        <view id="networkcomponents" display="hidden">
                <blockRef id="main" type="networkcomponents_table"/>
        </view>
        <view id="msplit_clusters" label="M-SPLIT Clusters" group="Detail Views">
                <blockRef id="main" type="spectrum_list_msplit"/>
        </view>
        <view id="msplit_peptides" label="M-SPLIT Peptides" group="Detail Views">
                <blockRef id="main" type="peptide_list_msplit"/>
        </view>
        <view id="msplit_proteins" label="M-SPLIT Proteins" group="Detail Views">
                <blockRef id="main" type="protein_list_msplit"/>
        </view>

    <view id="protein_details_msplit" display="hidden">
        <blockRef id="main" type="spectra_per_protein_msplit"/>
    </view>
    <view id="msgfplus_clusters" label="MS-GF+ Clusters" group="Detail Views">
        <blockRef id="main" type="spectrum_list_msgfplus"/>
    </view>
    <view id="msgfplus_peptides" label="MS-GF+ Peptides" group="Detail Views">
        <blockRef id="main" type="peptide_list_msgfplus"/>
    </view>
    <view id="msgfplus_proteins" label="MS-GF+ Proteins" group="Detail Views">
        <blockRef id="main" type="protein_list_msgfplus"/>
    </view>
    <view id="protein_details_msgfplus" display="hidden">
        <blockRef id="main" type="spectra_per_protein_msgfplus"/>
    </view>
    <view id="moda_clusters" label="MODa Clusters" group="Detail Views">
        <blockRef id="main" type="spectrum_list_moda"/>
    </view>
    <view id="moda_peptides" label="MODa Peptides" group="Detail Views">
        <blockRef id="main" type="peptide_list_moda"/>
    </view>
    <view id="moda_proteins" label="MODa Proteins" group="Detail Views">
        <blockRef id="main" type="protein_list_moda"/>
    </view>
    <view id="protein_details_moda" display="hidden">
        <blockRef id="main" type="spectra_per_protein_moda"/>
    </view>
    <!--     <view id="moda_modification_counts" label="MODa Modification Counts (deprecated)" group="Detail Views">
        <blockRef id="main" type="ptm_counts"/>
    </view> -->
    <view id="scan_details_overall" display="hidden">
        <blockRef id="main" type="spectra_per_scan_overall"/>
    </view>
        <view id="identified_network_pairs" label="Identified Network Pairs" group="Detail Views">
                <blockRef id="main" type="view_qc_false_results"/>
        </view>
    <view id="network_pair_modifications" label="Network Pair Modifications" group="Detail Views">
        <blockRef id="main" type="pair_mod_counts"/>
    </view>
        <view id="all_network_pairs" label="All Network Pairs" group="Detail Views">
                <blockRef id="main" type="network_pairs_specnets"/>
        </view>
        <view id="peptide_pairs" label="Peptide Pairs" group="Detail Views">
                <blockRef id="main" type="categ_table"/>
        </view>
        <view id="spectral_networks" label="Spectral Networks" group="Network Visualizations">
                <blockRef id="main" type="network_components_peptide"/>
        </view>
        <view id="peptide_variant_networks" label="Peptide Variant Networks" group="Network Visualizations">
                <blockRef id="main" type="variant_networks_table"/>
        </view>
        <view id="variant_ids_sliced"  display="hidden">
                <blockRef id="main" type="variant_ids_sliced"/>
        </view>
        <view id="network_displayer_maestro"  label="Network Display (Alpha)" display="hidden">
                <blockRef id="main" type="network_displayer_maestro"/>
        </view>
        <view id="cluster_info_sliced" label="View Clusters Sliced" display="hidden">
                <blockRef id="main" type="cluster_info_sliced"/>
        </view>
        <view id="cluster_info_sliced_variant" label="View Clusters Sliced Variant" display="hidden">
                <blockRef id="main" type="cluster_info_sliced_variant"/>
        </view>
        <view id="all_clusters_sliced_by_comp_index" label="View Clusters Sliced" display="hidden">
                <blockRef id="main" type="all_clusters_sliced_by_comp_index"/>
        </view>
        <view id="all_clusters_sliced_by_cluster_index" label="View Clusters Sliced" display="hidden">
                <blockRef id="main" type="all_clusters_sliced_by_cluster_index"/>
        </view>
        <view id="network_pairs_specnets_componentsliced" label="View Network Pairs Component Sliced" display="hidden">
                <blockRef id="main" type="network_pairs_specnets_componentsliced"/>
        </view>
        <view id="network_pairs_specnets_componentsliced_variant" label="View Network Pairs Component Sliced Variant" display="hidden">
                <blockRef id="main" type="network_pairs_specnets_componentsliced_variant"/>
        </view>
        <!--<view id="spectral_network_graphs" label="Spectral Network Graphs" group="Network Visualizations">
                <blockRef id="main" type="pairs_histogram"/>
        </view>-->
        <view id="identified_spectra" label="Identified Spectra" group="Overall Views">
            <blockRef id="main"   type="view_raw_spectra_id_only"/>
        </view>
        <view id="all_clusters" label="All Clusters" group="Overall Views">
                <blockRef id="main" type="clusters_list_specnets_withID_beta"/>
        </view>
        <view id="network_pairs_specnets_allcomponents" label="View Network Pairs All Component" display="hidden">
                <blockRef id="main" type="network_pairs_specnets_allcomponents"/>
        </view>
        <view id="network_pairs_specnets_allcomponents_variant" label="View Network Pairs All Component Variant" display="hidden">
                <blockRef id="main" type="network_pairs_specnets_allcomponents_variant"/>
        </view>
        <!--<view id="all_spectra" label="All Spectra (deprecated)" group="Overall Views">
            <blockRef id="main"   type="view_raw_spectra"/>
        </view>-->
        <view id="all_spectra_new" label="All Spectra" group="Overall Views">
            <blockRef id="main"   type="view_raw_spectra_new"/>
        </view>
        <view id="spec_fams_sliced_by_comp_index" display="hidden">
            <blockRef id="main"   type="spec_fams_sliced_by_comp_index"/>
        </view>
    <view id="peptide_modifications" label="Peptide Modifications" group="Detail Views">
        <blockRef id="main" type="lars_ptm_table"/>
    </view>
        <view id="view_all_cluster_peptide_identifications_component_sliced" display="hidden">
                <blockRef id="main" type="view_all_cluster_peptide_identifications_component_sliced"/>
        </view>
     <view id="download_clustered_spectra" label="Download Clusters File" group="Export">
	<blockRef id="main"   type="download_clustered_spectra"/>
      </view>
     <view id="download_mztab" label="Download MzTab Files" group="Export">
	<blockRef id="main"   type="download_mztab"/>
      </view>

<!--***********BLOCKS***************--> 
    <block id="networkcomponents_table" type="table">
                <data>
                        <source type="file" name="networkcomponents/"/>
                        <parsers>
                                <parser type="tabular"/>
                        </parsers>

                </data>
                <row>
                        <column type="integer"     field="ComponentIndex"   label="Component Index"     width="6"/>
                        <column type="integer"     field="NodeCount"   label="Node Count"       width="6"/>
                        <column type="text"     field="AllIDs"   label="All IDs"        width="13"/>
                        <column type="integer"     field="%ID"   label="% ID"   width="3"/>
                        <column type="integer"     field="#Spectra"   label="# Spectra" width="6"/>
                </row>

        </block>
    
        <block id="view_all_annotations_DB" type="table">
                <data>
                        <source type="file" name="result_specnets_DB/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="Compound_Name" operator="ascending"/>
                        </parsers>
                        <processors>
                                <processor type="uploadFilename" field="SpectrumFile"/>
                        </processors>
                </data>
                <row>
                        <column type="text"        field="Compound_Name" label="Compound_Name"        width="12"/>
                        <column type="integer"     field="#Scan#"         label="Scan"            width="3"/>
                        <!--<column type="text"     field="SpectrumID"         label="SpectrumID"            width="15"/>-->
                        <column type="text"     field="LibraryQualityString"         label="Library Class"            width="5"/>
                        
                        <column type="float"     field="MQScore"         label="Cosine"            precision="2"/>
                        <column type="integer"     field="SharedPeaks"         label="SharedPeaks"            width="3"/>
                        <column type="float"     field="TIC_Query"         label="TIC Query"            precision="2"/>
                        <column type="float"     field="RT_Query"         label="RT Query"           precision="2" />
                        <column type="integer"     field="MZErrorPPM"         label="MZErrorPPM"            />
                        <column type="text"     field="Organism"         label="Organism"            width="3"/>
                        
                        <column type="integer"     field="MassDiff"         label="MassDiff"            width="3"/>
                        <column type="float"     field="LibMZ"         label="LibMZ"            precision="2"/>
                        
                        <column type="text"     field="Instrument"         label="Instrument"            width="5"/>
                        <column type="text"     field="IonMode"         label="IonMode"            width="5"/>
                        <column type="text"     field="PI"         label="PI"            width="5"/>
                        <column type="text"     field="Ion_Source"         label="Ion Source"            width="5"/>
                        
                        <column type="mingplugin" target="/" label="Update">
                          <parameter name="workflow" value="[UpdateWorkflowName]"/>
                          <parameter name="SPECTRUMID" value="[SpectrumID]"/>
                          <parameter name="ADDSPECTRA_LIBQUALITY" value="[Library_Class]"/>
                          <parameter name="ADDSPECTRA_IONSOURCE" value="[Ion_Source]"/>
                          <parameter name="ADDSPECTRA_INSTRUMENT" value="[Instrument]"/>
                          <parameter name="ADDSPECTRA_IONMODE" value="[IonMode]"/>
                          <parameter name="ADDSPECTRA_ACQUISITION" value="[Compound_Source]"/>
                          <parameter name="ADDSPECTRA_SMILES" value="[Smiles]"/>
                          <parameter name="ADDSPECTRA_INCHI" value="[INCHI]"/>
                          <parameter name="ADDSPECTRA_INCHIAUX" value="[INCHI_AUX]"/>
                          <parameter name="ADDSPECTRA_CASNUMBER" value="[CAS_Number]"/>
                          <parameter name="ADDSPECTRA_PUB" value="[Pubmed_ID]"/>
                          <parameter name="ADDSPECTRA_PI" value="[PI]"/>
                          <parameter name="ADDSPECTRA_DATACOLLECTOR" value="[Data_Collector]"/>
                          <parameter name="ADDSPECTRA_EXACTMASS" value="[ExactMass]"/>
                          <parameter name="ADDSPECTRA_ADDUCT" value="[Adduct]"/>
                          <parameter name="ADDSPECTRA_CHARGE" value="[Charge]"/>
                          <parameter name="ADDSPECTRA_MOLECULEMASS" value="[Precursor_MZ]"/>
                          <parameter name="ADDSPECTRA_COMPOUND_NAME" value="[Compound_Name]"/>
                        </column>
                </row>
                <row expander="image">
                        <column type="stream" invoke="annotatedSpectrumImageThumbnail" contentType="image/png" colspan="5">
                                <parameter name="file"    file="spectra/[internalFilename]"/>
                                <parameter name="scan"    value="[#Scan#]"/>
                                <parameter name="peptide" value="{?:peptide}*..*"/>
                        </column>
                        <column type="stream" invoke="annotatedSpectrumImageThumbnail" contentType="image/png" colspan="5">
                            <parameter name="file"    file="lib/[LibraryName]"/>
                            <parameter name="spectrumid"    value="[SpectrumID]"/>
                            <parameter name="peptide" value="{?:peptide}*..*"/>
                        </column>
                </row>
        </block>
 
        <block id="results_per_cluster" type="table">
        <data>
            <source type="file" name="allclustered_spectra_info_withpath/"/>
            <parsers>
                <parser type="slicedTabular" groupBy="cluster index" sliceBy="{protein}"/>
            </parsers>
        </data>
        <row>
                        <column type="text"     field="Original_Path"        label="Filename"          width="10" tooltip="Name of original input spectrum file containing this spectrum"/>
                        <column type="integer"     field="ScanNumber"        label="Scan"          width="3" tooltip="Scan number of this spectrum in original input spectrum file"/>
                        <column type="integer"     field="cluster index"         label="ClusterIndex"            width="3" tooltip="Index of the cluster containing this spectrum. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected"/>
                        <column type="float"     field="sum(precursor intensity)"        label="Precursor Intensity"          precision="3"/>
                        <column type="float"     field="RTMean"        label="Retention Time"          precision="3"/>
                        <column type="float"     field="parent mass"        label="Parent Mass"          precision="3"/> 
        </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[cluster index]"/>
                        <parameter name="compoundname" value="*..*"/>
            <parameter name="peptide" value="{?:peptide}      "/>
                    </column>
                </row>  
        </block> 


        <block id="network_pairs_specnets" type="table_ss">
                <data>
                        <source type="file" name="networkedges_display_pairs/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="Node1" operator="ascending"/>
                                <parser type="SQLite"/>
                        </parsers>
                </data>
                <row>
                        <column type="integer"        field="Node1" label="Cluster Index 1"        width="5"/>
                        <column type="integer"        field="Node2" label="Cluster Index 2"        width="5"/>
                        <column type="float"       field="Cos_Score"       label="Cosine Score"           precision="5" />
                        <column type="float"       field="MzDiff"           label="m/z Difference"             precision="5"/>
                </row>
                
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="1" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[Node1]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide1}      "/>
                    </column>
                    <column type="jscolumnspectrumviewer" colspan="1" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[Node2]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide2}      "/>
                    </column>
                </row>


        </block>
<!--****************************MSPLIT****************************-->
    
    <!-- Block definitions -->
    <block id="spectrum_list_msplit" type="table_ss">
        <data>
            <source type="file" name="msplitResult/"/>
            <parsers>
                    <parser type="sortedTabular" sortBy="svm1-score" operator="descending"/>
                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="uploadFilename" field="#SpectrumFile"/>
                <processor type="protein"        field="Protein"/>
            </processors>
        </data>
        <row>
            <column type="text"    field="#SpectrumFile"  label="Filename"      width="12"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="Scan#" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[Scan#]"/>
                    </column>
<!--            <column type="integer" field="Scan#"          label="Cluster Index"          width="3"/>-->
            <column type="text"    field="Annotation"     label="Peptide"       width="18"/>
            <column type="text"    field="Protein"        label="Protein"       width="18"/>
            <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
            <column type="integer" field="Charge"         label="Charge"        width="1"/>
            <column type="float"   field="cosine(M, A+B)" label="Cosine(M,A+B)" precision="3"/>
            <column type="float"   field="cosine(M,A)"    label="Cosine(M,A)"   precision="3"/>
            <column type="float"   field="cosine(A,B)"    label="Cosine(A,B)"   precision="3"/>
            <column type="float"   field="alpha"          label="Alpha"         precision="3"/>
            <column type="float"   field="res-alpha"      label="Res-Alpha"     precision="3"/>
            <column type="float"   field="svm1-score"     label="SVM1-Score"    precision="3"/>
            <column type="float"   field="svm2-score"     label="SVM2-Score"    precision="3"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
            <column type="text" field="LibrariesContainingAnno"     label="Libraries"     width="15" tooltip="Libraries containing peptide"/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                   <parameter name="file"    file="spectra/specs_ms.mgf"/>
                   <parameter name="scan"    value="[Scan#]"/>
                   <parameter name="compoundname" value="*..*"/>
                   <parameter name="peptide" value="{?:peptide}[Annotation]"/>
             </column>

            <column type="jscolumnspectrumviewer" colspan="5" label="Library" width="550" height="350">
                   <parameter name="file"    file="specLib/mergedLib.mgf"/>
                   <parameter name="index"    value="[libIndex1]"/>
                   <parameter name="compoundname" value="*..*"/>
                   <parameter name="peptide" value="{?:peptide}[Annotation]"/>
            </column>
            <column type="jscolumnspectrumviewer_spectrum_comparison" colspan="5">
                <parameter name="spectrum1_type"    value="flatfile"/>
                <parameter name="spectrum1_file"    file="spectra/specs_ms.mgf"/>>
                <parameter name="spectrum1_scan"    value="[Scan#]"/>
                <parameter name="spectrum2_type"    value="flatfile"/>
                <parameter name="spectrum2_file"    file="specLib/mergedLib.mgf"/>>
                <parameter name="spectrum2_index"    value="[libIndex1]"/>
                <parameter name="display_peptide"    value="[Annotation]"/>
            </column>
        </row>
    </block>
    
    <block id="peptide_list_msplit" type="table_ss">
        <data>
            <source type="file" name="msplitResult/"/>
            <parsers>
                <parser type="representativeTabular" groupBy="Annotation"  numeric="false" selectBy="svm1-score" operator="max"/>
                                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="uploadFilename" field="#SpectrumFile"/>
                <processor type="protein"        field="Protein"/>
                <processor type="peptideCount" field="Annotation"/>
            </processors>
        </data>
        <row>
            <column type="text"    field="#SpectrumFile"  label="Filename"      width="12"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="Scan#" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[Scan#]"/>
                    </column>
<!--            <column type="integer" field="Scan#"          label="Cluster Index"          width="3"/>-->
            <column type="text"    field="Annotation"     label="Peptide"       width="18"/>
            <column type="text"    field="Protein"        label="Protein"       width="18"/>
            <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
            <column type="integer" field="Charge"         label="Charge"        width="1"/>
            <column type="float"   field="cosine(M, A+B)" label="Cosine(M,A+B)" precision="3"/>
            <column type="float"   field="cosine(M,A)"    label="Cosine(M,A)"   precision="3"/>
            <column type="float"   field="cosine(A,B)"    label="Cosine(A,B)"   precision="3"/>
            <column type="float"   field="alpha"          label="Alpha"         precision="3"/>
            <column type="float"   field="res-alpha"      label="Res-Alpha"     precision="3"/>
            <column type="float"   field="svm1-score"     label="SVM1-Score"    precision="3"/>
            <column type="float"   field="svm2-score"     label="SVM2-Score"    precision="3"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
            <column type="text" field="LibrariesContainingAnno"     label="Libraries"     width="15" tooltip="Libraries containing peptide"/>
        </row>
        <row expander="down:up">
            <column type="block" block="spectra_per_peptide" colspan="13">
                <parameter name="peptide" value="{?:peptide}[Annotation]"/>
            </column>
        </row>
    </block>
    
    <block id="spectra_per_peptide" type="table">
        <data>
            <source type="file" name="msplitResult/"/>
            <parsers>
                <parser type="sortedTabular" sortBy="svm1-score"  operator="descending"/>
                <parser type="slicedTabular" groupBy="Annotation" sliceBy="{peptide}"/>
            </parsers>
            <processors>
                <processor type="protein"        field="Protein"/>
                <processor type="uploadFilename" field="#SpectrumFile"/>
            </processors>
        </data>
        <row>
            <column type="text"    field="#SpectrumFile"  label="Filename"      width="12"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="Scan#" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[Scan#]"/>
                    </column>
<!--            <column type="integer" field="Scan#"          label="Cluster Index"          width="1"/>-->
            <column type="text"    field="Annotation"     label="Peptide"       width="18"/>
            <column type="text"    field="Protein"        label="Protein"       width="18"/>
            <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
            <column type="integer" field="Charge"         label="Charge"        width="1"/>
            <column type="float"   field="cosine(M, A+B)" label="Cosine(M,A+B)" precision="3"/>
            <column type="float"   field="cosine(M,A)"    label="Cosine(M,A)"   precision="3"/>
            <column type="float"   field="cosine(A,B)"    label="Cosine(A,B)"   precision="3"/>
            <column type="float"   field="alpha"          label="Alpha"         precision="3"/>
            <column type="float"   field="res-alpha"      label="Res-Alpha"     precision="3"/>
            <column type="float"   field="svm1-score"     label="SVM1-Score"    precision="3"/>
            <column type="float"   field="svm2-score"     label="SVM2-Score"    precision="3"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
            <column type="text" field="LibrariesContainingAnno"     label="Libraries"     width="15" tooltip="Libraries containing peptide"/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                   <parameter name="file"    file="spectra/specs_ms.mgf"/>
                   <parameter name="scan"    value="[Scan#]"/>
                   <parameter name="compoundname" value="*..*"/>
                   <parameter name="peptide" value="{?:peptide}[Annotation]"/>
             </column>

            <column type="jscolumnspectrumviewer" colspan="5" label="Library" width="550" height="350">
                   <parameter name="file"    file="specLib/mergedLib.mgf"/>
                   <parameter name="index"    value="[libIndex1]"/>
                   <parameter name="compoundname" value="*..*"/>
                   <parameter name="peptide" value="{?:peptide}[Annotation]"/>
            </column>
            <column type="jscolumnspectrumviewer_spectrum_comparison" colspan="5">
                <parameter name="spectrum1_type"    value="flatfile"/>
                <parameter name="spectrum1_file"    file="spectra/specs_ms.mgf"/>>
                <parameter name="spectrum1_scan"    value="[Scan#]"/>
                <parameter name="spectrum2_type"    value="flatfile"/>
                <parameter name="spectrum2_file"    file="specLib/mergedLib.mgf"/>>
                <parameter name="spectrum2_index"    value="[libIndex1]"/>
                <parameter name="display_peptide"    value="[Annotation]"/>
            </column>
        </row>
    </block>
    
    <block id="protein_list_msplit" type="table_ss">
        <data>
            <source type="file" name="msplitResult/"/>
            <parsers>
                <parser type="sortedTabular"  sortBy="svm1-score" operator="descending"/>
                <parser type="groupedTabular" groupBy="Protein"/>
                                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="protein"      field="Protein"/>
                <processor type="peptideCount" field="Annotation"/>
            </processors>
        </data>
        <row>
            <column type="text"        field="Protein"          label="Protein"    width="30"    tooltip="Protein name"/>
            <column type="integer" field="Hits"     label="Hits"                       width="2"/>
            <column type="integer" field="Peptides" label="Unique Unmodified Peptides" width="2"/>
            <column type="integer" field="Modified" label="Unique Modified Peptides"   width="2"/>
        </row>
        <row expander="down:up">
            <column type="block" block="spectra_per_protein_msplit" colspan="5">
                <parameter name="protein" value="[Protein]"/>
            </column>
        </row>
    </block>
    
    <block id="spectra_per_protein_msplit" type="table">
        <data>
            <source type="file" name="msplitResult/"/>
            <parsers>
                <parser type="sortedTabular" sortBy="svm1-score" operator="descending"/>
                <parser type="slicedTabular" groupBy="Protein"   sliceBy="{protein}"/>
            </parsers>
            <processors>
                <processor type="uploadFilename" field="#SpectrumFile"/>
                <processor type="protein"        field="Protein"/>
            </processors>
        </data>
        <row>
            <column type="text"    field="#SpectrumFile"  label="Filename"      width="12"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="Scan#" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[Scan#]"/>
                    </column>
<!--            <column type="integer" field="Scan#"          label="Cluster Index"          width="1"/>-->
            <column type="text"    field="Annotation"     label="Peptide"       width="18"/>
            <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
            <column type="integer" field="Charge"         label="Charge"        width="1"/>
            <column type="float"   field="cosine(M, A+B)" label="Cosine(M,A+B)" precision="3"/>
            <column type="float"   field="cosine(M,A)"    label="Cosine(M,A)"   precision="3"/>
            <column type="float"   field="cosine(A,B)"    label="Cosine(A,B)"   precision="3"/>
            <column type="float"   field="alpha"          label="Alpha"         precision="3"/>
            <column type="float"   field="res-alpha"      label="Res-Alpha"     precision="3"/>
            <column type="float"   field="svm1-score"     label="SVM1-Score"    precision="3"/>
            <column type="float"   field="svm2-score"     label="SVM2-Score"    precision="3"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
            <column type="text" field="LibrariesContainingAnno"     label="Libraries"     width="15" tooltip="Libraries containing peptide"/>
        </row>
            <row expander="image">
                        <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                               <parameter name="file"    file="spectra/specs_ms.mgf"/>
                               <parameter name="scan"    value="[Scan#]"/>
                               <parameter name="compoundname" value="*..*"/>
                               <parameter name="peptide" value="{?:peptide}[Annotation]"/>
                         </column>

                        <column type="jscolumnspectrumviewer" colspan="5" label="Library" width="550" height="350">
                               <parameter name="file"    file="specLib/mergedLib.mgf"/>
                               <parameter name="index"    value="[libIndex1]"/>
                               <parameter name="compoundname" value="*..*"/>
                               <parameter name="peptide" value="{?:peptide}[Annotation]"/>
                        </column>
                        <column type="jscolumnspectrumviewer_spectrum_comparison" colspan="5">
                                <parameter name="spectrum1_type"    value="flatfile"/>
                                <parameter name="spectrum1_file"    file="spectra/specs_ms.mgf"/>>
                                <parameter name="spectrum1_scan"    value="[Scan#]"/>
                                <parameter name="spectrum2_type"    value="flatfile"/>
                                <parameter name="spectrum2_file"    file="specLib/mergedLib.mgf"/>>
                                <parameter name="spectrum2_index"    value="[libIndex1]"/>
                                <parameter name="display_peptide"    value="[Annotation]"/>
                        </column>
                </row>
    </block>
    

<!--*************************MSGF+*********************************-->
    <!-- Block definitions -->
    <block id="spectrum_list_msgfplus" type="table_ss">
        <data>
            <source type="file" name="msgfplusResult/"/>
            <parsers>
                    <parser type="sortedTabular" sortBy="MSGFScore" operator="descending"/>
                                <parser type="SQLite"/>
            </parsers>
                        <processors>
                                <processor type="uploadFilename" field="#SpecFile"/>
                                <processor type="protein"        field="Protein"/>
                                <processor type="nativeID"       field="SpecID"/>
                        </processors>
        </data>
        <row>
            <column type="text"        field="#SpecFile"  label="Filename"   width="12"    tooltip="Spectrum file name"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="ScanNum" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[ScanNum]"/>
                    </column>
            <!--<column type="integer"     field="Scan#"      label="Cluster Index"       width="3"     tooltip="Spectrum scan number"/>-->
            <column type="text"        field="FragMethod" label="Fragmentation" width="3"     tooltip="Fragmentation method"/>
            <column type="text"        field="Peptide"    label="Peptide"    width="18"    tooltip="Peptide sequence with neighboring amino acids"/>
            <column type="text"        field="Protein"  label="Protein"    width="18"    tooltip="Protein name"/>
            <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
            <column type="integer"     field="Charge"     label="Charge"     width="1"     tooltip="Precursor ion charge"/>
            <column type="integer"     field="MSGFScore"  label="Score"      width="3"     tooltip="MS-GF raw score of the peptide-spectrum match"/>
                        <column type="exponential" field="SpecEValue"     label="SpecProb"   precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;peptide&lt;/b&gt; with a score equal to or exceeding the observed score"/>
                        <column type="exponential" field="EValue"         label="DB E-Value" precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;database&lt;/b&gt; with a score equal to or exceeding the observed score"/>
                        <column type="float"       field="QValue"         label="FDR"        precision="5" tooltip="False discovery rate"/>
                        <column type="float"       field="PepQValue"      label="PepFDR"     precision="5" tooltip="Peptide-level false discovery rate estimated using the target-decoy approach"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
        </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[ScanNum]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                    </column>
                </row>
    </block>
    
    <block id="peptide_list_msgfplus" type="table_ss">
        <data>
            <source type="file" name="msgfplusResult/"/>
            <parsers>
                <parser type="representativeTabular" groupBy="Peptide"  numeric="false" selectBy="MSGFScore" operator="max"/>
                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="uploadFilename" field="#SpecFile"/>
                <processor type="protein"        field="ProteinID"/>
                <processor type="peptideCount" field="Peptide"/>
            </processors>
        </data>
        <row>
            <column type="text"        field="#SpecFile"  label="Filename"   width="12"    tooltip="Spectrum file name"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="ScanNum" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[ScanNum]"/>
                    </column>
            <!--<column type="integer"     field="Scan#"      label="Cluster Index"       width="3"     tooltip="Spectrum scan number"/>-->
            <column type="text"        field="FragMethod" label="Fragmentation" width="3"     tooltip="Fragmentation method"/>
            <column type="text"        field="Peptide"    label="Peptide"    width="18"    tooltip="Peptide sequence with neighboring amino acids"/>
            <column type="text"        field="Protein"  label="Protein"    width="18"    tooltip="Protein name"/>
            <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
            <column type="integer"     field="Charge"     label="Charge"     width="1"     tooltip="Precursor ion charge"/>
            <column type="integer"     field="MSGFScore"  label="Score"      width="3"     tooltip="MS-GF raw score of the peptide-spectrum match"/>
                        <column type="exponential" field="SpecEValue"     label="SpecProb"   precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;peptide&lt;/b&gt; with a score equal to or exceeding the observed score"/>
                        <column type="exponential" field="EValue"         label="DB E-Value" precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;database&lt;/b&gt; with a score equal to or exceeding the observed score"/>
                        <column type="float"       field="QValue"         label="FDR"        precision="5" tooltip="False discovery rate"/>
                        <column type="float"       field="PepQValue"      label="PepFDR"     precision="5" tooltip="Peptide-level false discovery rate estimated using the target-decoy approach"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
        </row>

        <row expander="down:up">
            <column type="block" block="spectra_per_peptide_msgfplus" colspan="12">
                <parameter name="peptide" value="{?:peptide}[Peptide]"/>
            </column>
        </row>
    </block>
    
    <block id="spectra_per_peptide_msgfplus" type="table">
        <data>
            <source type="file" name="msgfplusResult/"/>
            <parsers>
                <parser type="sortedTabular" sortBy="MSGFScore"      operator="ascending"/>
                <parser type="slicedTabular" groupBy="Peptide" sliceBy="{peptide}"/>
            </parsers>
            <processors>
                <processor type="uploadFilename" field="#SpecFile"/>
                <processor type="protein"        field="Protein"/>
                                <processor type="nativeID"       field="SpecID"/>
            </processors>
        </data>
                <row>
                        <column type="text"        field="#SpecFile"  label="Filename"   width="12"    tooltip="Spectrum file name"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="ScanNum" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[ScanNum]"/>
                    </column>
                        <!--<column type="integer"     field="Scan#"      label="Cluster Index"       width="3"     tooltip="Spectrum scan number"/>-->
                        <column type="text"        field="FragMethod" label="Fragmentation" width="3"     tooltip="Fragmentation method"/>
                        <column type="text"        field="Peptide"    label="Peptide"    width="18"    tooltip="Peptide sequence with neighboring amino acids"/>
                        <column type="text"        field="Protein"  label="Protein"    width="18"    tooltip="Protein name"/>
                        <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
                        <column type="integer"     field="Charge"     label="Charge"     width="1"     tooltip="Precursor ion charge"/>
                        <column type="integer"     field="MSGFScore"  label="Score"      width="3"     tooltip="MS-GF raw score of the peptide-spectrum match"/>
                        <column type="exponential" field="SpecEValue"     label="SpecProb"   precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;peptide&lt;/b&gt; with a score equal to or exceeding the observed score"/>
                        <column type="exponential" field="EValue"         label="DB E-Value" precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;database&lt;/b&gt; with a score equal to or exceeding the observed score"/>
                        <column type="float"       field="QValue"         label="FDR"        precision="5" tooltip="False discovery rate"/>
                        <column type="float"       field="PepQValue"      label="PepFDR"     precision="5" tooltip="Peptide-level false discovery rate estimated using the target-decoy approach"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
                </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[ScanNum]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                    </column>
                </row>
    </block>
    
    <block id="protein_list_msgfplus" type="table_ss">
        <data>
            <source type="file" name="msgfplusResult/"/>
            <parsers>
                <parser type="sortedTabular"  sortBy="MSGFScore"      operator="ascending"/>
                <parser type="groupedTabular" groupBy="Protein"/>
                                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="protein"      field="Protein"/>
                <processor type="peptideCount" field="Peptide"/>
            </processors>
        </data>
        <row>
            <column type="text"        field="Protein"          label="Protein"    width="30"    tooltip="Protein name"/>
            <column type="integer"  field="Hits"      label="Hits"                       width="2"/>
            <column type="integer"  field="Peptides"  label="Unique Unmodified Peptides" width="2"/>
            <column type="integer"  field="Modified"  label="Unique Modified Peptides"   width="2"/>
        </row>
        <row expander="down:up">
            <column type="block" block="spectra_per_protein_msgfplus" colspan="5">
                <parameter name="protein" value="[Protein]"/>
            </column>
        </row>
    </block>
    
    <block id="spectra_per_protein_msgfplus" type="table">
        <data>
            <source type="file" name="msgfplusResult/"/>
            <parsers>
                <parser type="sortedTabular" sortBy="MSGFScore"      operator="ascending"/>
                <parser type="slicedTabular" groupBy="Protein" sliceBy="{protein}"/>
            </parsers>
            <processors>
                <processor type="uploadFilename" field="#SpecFile"/>
                <processor type="protein"        field="Protein"/>
                                <processor type="nativeID"       field="SpecID"/>
            </processors>
        </data>
                <row>
                        <column type="text"        field="#SpecFile"  label="Filename"   width="12"    tooltip="Spectrum file name"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="ScanNum" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[ScanNum]"/>
                    </column>
                        <!--<column type="integer"     field="Scan#"      label="Cluster Index"       width="3"     tooltip="Spectrum scan number"/>-->
                        <column type="text"        field="FragMethod" label="Fragmentation" width="3"     tooltip="Fragmentation method"/>
                        <column type="text"        field="Peptide"    label="Peptide"    width="18"    tooltip="Peptide sequence with neighboring amino acids"/>
                        <column type="text"        field="Protein"  label="Protein"    width="18"    tooltip="Protein name"/>
                        <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
                        <column type="integer"     field="Charge"     label="Charge"     width="1"     tooltip="Precursor ion charge"/>
                        <column type="integer"     field="MSGFScore"  label="Score"      width="3"     tooltip="MS-GF raw score of the peptide-spectrum match"/>
                        <column type="exponential" field="SpecEValue"     label="SpecProb"   precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;peptide&lt;/b&gt; with a score equal to or exceeding the observed score"/>
                        <column type="exponential" field="EValue"         label="DB E-Value" precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;database&lt;/b&gt; with a score equal to or exceeding the observed score"/>
                        <column type="float"       field="QValue"         label="FDR"        precision="5" tooltip="False discovery rate"/>
                        <column type="float"       field="PepQValue"      label="PepFDR"     precision="5" tooltip="Peptide-level false discovery rate estimated using the target-decoy approach"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
                </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[ScanNum]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                    </column>
                </row>
    </block>


<!-- ***********************************MODA***********************-->

    <!-- Block definitions -->
    <block id="spectrum_list_moda" type="table_ss">
        <data>
            <source type="file" name="modaResult/"/>
            <parsers>
                <parser type="sortedTabular" sortBy="Score" operator="descending"/>
                                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="uploadFilename" field="#SpectrumFile"/>
                <processor type="protein"        field="Protein"/>
            </processors>
        </data>
        <row>
            <column type="text"    field="#SpectrumFile"    label="Filename"         width="12"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="ScanNo" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[ScanNo]"/>
                    </column>
            <!--<column type="integer" field="ScanNo"          label="Cluster Index"             width="3"/>-->
            <column type="integer" field="Charge"          label="Charge"           width="1"/>
            <column type="float"   field="ObservedMW"      label="Observed MW"      precision="4"/>
            <column type="float"   field="CalculatedMW"    label="Calculated MW"    precision="4"/>
            <column type="float"   field="DeltaMass"       label="Delta Mass"       precision="4"/>
            <column type="integer" field="Score"           label="Score"            width="3"/>
            <column type="float"   field="Probability"     label="Probability"      precision="4"/>
            <column type="text"    field="Peptide"         label="Peptide"          width="18"/>
            <column type="text"    field="Protein"         label="Protein"          width="18"/>
            <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
            <column type="text"    field="PeptidePosition" label="Peptide Position" width="9"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
        </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[ScanNo]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                    </column>
                </row>
    </block>
    
    <block id="peptide_list_moda" type="table_ss">
        <data>
            <source type="file" name="modaResult/"/>
            <parsers>
                <parser type="representativeTabular" groupBy="Peptide"  numeric="false" selectBy="Score" operator="max"/>
                                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="uploadFilename" field="#SpectrumFile"/>
                <processor type="protein"        field="Protein"/>
                <processor type="peptideCount" field="Peptide"/>
            </processors>
        </data>
        <row>
            <column type="text"    field="#SpectrumFile"    label="Filename"         width="12"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="ScanNo" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[ScanNo]"/>
                    </column>
            <!--<column type="integer" field="ScanNo"          label="Cluster Index"             width="3"/>-->
            <column type="integer" field="Charge"          label="Charge"           width="1"/>
            <column type="float"   field="ObservedMW"      label="Observed MW"      precision="4"/>
            <column type="float"   field="CalculatedMW"    label="Calculated MW"    precision="4"/>
            <column type="float"   field="DeltaMass"       label="Delta Mass"       precision="4"/>
            <column type="integer" field="Score"           label="Score"            width="3"/>
            <column type="float"   field="Probability"     label="Probability"      precision="4"/>
            <column type="text"    field="Peptide"         label="Peptide"          width="18"/>
            <column type="text"    field="Protein"         label="Protein"          width="18"/>
            <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
            <column type="text"    field="PeptidePosition" label="Peptide Position" width="9"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
        </row>

        <row expander="down:up">
            <column type="block" block="spectra_per_peptide_moda" colspan="12">
                <parameter name="peptide" value="{?:peptide}[Peptide]"/>
            </column>
        </row>
    </block>
    
    <block id="spectra_per_peptide_moda" type="table">
        <data>
            <source type="file" name="modaResult/"/>
            <parsers>
                <parser type="sortedTabular" sortBy="Score"    operator="descending"/>
                <parser type="slicedTabular" groupBy="Peptide" sliceBy="{peptide}"/>
            </parsers>
            <processors>
                <processor type="uploadFilename" field="#SpectrumFile"/>
                <processor type="protein"        field="Protein"/>
            </processors>
        </data>
        <row>
            <column type="text"    field="#SpectrumFile"    label="Filename"         width="12"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="ScanNo" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[ScanNo]"/>
                    </column>
            <!--<column type="integer" field="ScanNo"          label="Cluster Index"             width="3"/>-->
            <column type="text" field="Peptide"           label="Peptide"            width="3"/>
            <column type="integer" field="Charge"          label="Charge"           width="1"/>
            <column type="float"   field="ObservedMW"      label="Observed MW"      precision="4"/>
            <column type="float"   field="CalculatedMW"    label="Calculated MW"    precision="4"/>
            <column type="float"   field="DeltaMass"       label="Delta Mass"       precision="4"/>
            <column type="integer" field="Score"           label="Score"            width="3"/>
            <column type="float"   field="Probability"     label="Probability"      precision="4"/>
            <column type="text"    field="Protein"         label="Protein"          width="18"/>
            <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
            <column type="text"    field="PeptidePosition" label="Peptide Position" width="9"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
        </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[ScanNo]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                    </column>
                </row>
    </block>
    
    <block id="protein_list_moda" type="table_ss">
        <data>
            <source type="file" name="modaResult/"/>
            <parsers>
                <parser type="sortedTabular"  sortBy="Score"    operator="descending"/>
                <parser type="groupedTabular" groupBy="Protein"/>
                                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="protein"      field="Protein"/>
                <processor type="peptideCount" field="Peptide"/>
            </processors>
        </data>
        <row>
            <column type="text"        field="Protein"          label="Protein"    width="30"    tooltip="Protein name"/>
            <column type="integer"  field="Hits"      label="Hits"                       width="2"/>
            <column type="integer"  field="Peptides"  label="Unique Unmodified Peptides" width="2"/>
            <column type="integer"  field="Modified"  label="Unique Modified Peptides"   width="2"/>
        </row>
        <row expander="down:up">
            <column type="block" block="spectra_per_protein_moda" colspan="5">
                <parameter name="protein" value="[Protein]"/>
            </column>
        </row>
    </block>
    
    <block id="spectra_per_protein_moda" type="table">
        <data>
            <source type="file" name="modaResult/"/>
            <parsers>
                <parser type="sortedTabular" sortBy="Score"    operator="descending"/>
                <parser type="slicedTabular" groupBy="Protein" sliceBy="{protein}"/>
            </parsers>
            <processors>
                <processor type="uploadFilename" field="#SpectrumFile"/>
                <processor type="protein"        field="Protein"/>
            </processors>
        </data>
        <row>
            <column type="text"    field="#SpectrumFile"    label="Filename"         width="12"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="ScanNo" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[ScanNo]"/>
                    </column>
            <!--<column type="integer" field="ScanNo"          label="Cluster Index"             width="3"/>-->
            <column type="integer" field="Charge"          label="Charge"           width="1"/>
            <column type="float"   field="ObservedMW"      label="Observed MW"      precision="4"/>
            <column type="float"   field="CalculatedMW"    label="Calculated MW"    precision="4"/>
            <column type="float"   field="DeltaMass"       label="Delta Mass"       precision="4"/>
            <column type="integer" field="Score"           label="Score"            width="3"/>
            <column type="float"   field="Probability"     label="Probability"      precision="4"/>
            <column type="text"    field="Peptide"         label="Peptide"          width="18"/>
            <column type="text" field="Proteins"     label="All Proteins"     width="15"/>
            <column type="text"    field="PeptidePosition" label="Peptide Position" width="9"/>
            <column type="float"   field="Mean_KL"     label="Mean KL"    precision="3"/>
            <column type="float"   field="Max_KL"     label="Max KL"    precision="3"/>
        </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[ScanNo]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                    </column>
                </row>
    </block>
    
    <block id="ptm_counts" type="table_ss">
        <data>
            <source type="file" name="ptmResult/"/>
            <parsers>
                <parser type="tabular"/>
                                <parser type="SQLite"/>
            </parsers>
        </data>
        <row>
<!--            <column type="integer" field="Mass Offset" label="Mass Offset" width="2"/>-->
                        <column label="Mass Offset" type="genericurlgenerator" width="12" field="Mass Offset"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="modified_peptide_sliced"/>\
                            <parameter name="REQUESTPARAMETER=offset" value="[Mass Offset]"/>\
                            <parameter name="LABEL" value="[Mass Offset]"/>\
                            <parameter name="USETASK" value="True"/>\
                        </column>\
            <column type="integer" field="delta"     label="Mass Offset"     width="1"/>
            <column type="integer" field="A"     label="A"     width="1"/>
            <column type="integer" field="C"     label="C"     width="1"/>
            <column type="integer" field="D"     label="D"     width="1"/>
            <column type="integer" field="E"     label="E"     width="1"/>
            <column type="integer" field="F"     label="F"     width="1"/>
            <column type="integer" field="G"     label="G"     width="1"/>
            <column type="integer" field="H"     label="H"     width="1"/>
            <column type="integer" field="I"     label="I"     width="1"/>
            <column type="integer" field="K"     label="K"     width="1"/>
            <column type="integer" field="L"     label="L"     width="1"/>
            <column type="integer" field="M"     label="M"     width="1"/>
            <column type="integer" field="N"     label="N"     width="1"/>
            <column type="integer" field="P"     label="P"     width="1"/>
            <column type="integer" field="Q"     label="Q"     width="1"/>
            <column type="integer" field="R"     label="R"     width="1"/>
            <column type="integer" field="S"     label="S"     width="1"/>
            <column type="integer" field="T"     label="T"     width="1"/>
            <column type="integer" field="V"     label="V"     width="1"/>
            <column type="integer" field="W"     label="W"     width="1"/>
            <column type="integer" field="Y"     label="Y"     width="1"/>
            <column type="integer" field="Nterm" label="Nterm" width="2"/>
            <column type="integer" field="Cterm" label="Cterm" width="2"/>
            <column type="integer" field="Sum"   label="Sum"   width="2"/>
        </row>
    </block>

    <block id="lars_ptm_table" type="table_ss">
        <data>
            <source type="file" name="ptmTable/"/>
            <parsers>
                <parser type="tabular"/>
                <parser type="SQLite"/>
            </parsers>
        </data>
        <row>
           <!-- <column type="integer" field="Mass" label="Mass Offset" width="2"/>-->
                        <column label="Mass Offset" type="genericurlgenerator" width="12" field="Mass"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="identified_variants_merged_protein_regions"/>\
                            <parameter name="HASHPARAMTER=All_peptide_mods_input" value=",[Mass],"/>\
                            <parameter name="LABEL" value="[Mass]"/>\
                            <parameter name="USETASK" value="True"/>\
                        </column>
            <column type="integer" field="A"     label="A"     width="1"/>
            <column type="integer" field="C"     label="C"     width="1"/>
            <column type="integer" field="D"     label="D"     width="1"/>
            <column type="integer" field="E"     label="E"     width="1"/>
            <column type="integer" field="F"     label="F"     width="1"/>
            <column type="integer" field="G"     label="G"     width="1"/>
            <column type="integer" field="H"     label="H"     width="1"/>
            <column type="integer" field="I"     label="I"     width="1"/>
            <column type="integer" field="K"     label="K"     width="1"/>
            <column type="integer" field="L"     label="L"     width="1"/>
            <column type="integer" field="M"     label="M"     width="1"/>
            <column type="integer" field="N"     label="N"     width="1"/>
            <column type="integer" field="P"     label="P"     width="1"/>
            <column type="integer" field="Q"     label="Q"     width="1"/>
            <column type="integer" field="R"     label="R"     width="1"/>
            <column type="integer" field="S"     label="S"     width="1"/>
            <column type="integer" field="T"     label="T"     width="1"/>
            <column type="integer" field="V"     label="V"     width="1"/>
            <column type="integer" field="W"     label="W"     width="1"/>
            <column type="integer" field="Y"     label="Y"     width="1"/>
            <column type="integer" field="nTerm" label="Nterm" width="2"/>
            <column type="integer" field="cTerm" label="Cterm" width="2"/>
            <column type="integer" field="labile" label="Labile" width="2"/>
            <column type="integer" field="Total"   label="Sum"   width="2"/>
        </row>
    </block>

<!--*****************************AGGREGATE RESULTS***********************************--> 
        <block id="spectra_per_cluster_overall" type="table">
                <data>
                        <source type="file" name="rawSpectraIdOnly/"/>
                        <parsers>
                                <parser type="slicedTabular" groupBy="cluster index" sliceBy="{clusterindex}"/>
                        </parsers>
                        <processors>
                                <processor type="protein" field="Protein"/>
                        </processors>
                </data>
        <row>
                    <column type="text"     field="Original_Path"        label="Filename"          width="10"/>
                    <column type="integer"     field="ScanNumber"        label="Scan"          width="3"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="cluster index" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[cluster index]"/>
                    </column>
                    <column type="text"     field="Peptide"        label="Peptide"          width="10"/>
                    <column type="text"    field="Protein"        label="Protein"       width="18"/>
                    <column type="float"     field="sum(precursor intensity)"        label="Precursor Int"          precision="3"/>
                    <column type="float"     field="RTMean"        label="Retention Time"          precision="3"/>
                    <column type="float"     field="parent mass"        label="Parent Mass"          precision="3"/>                        
                    <column type="integer"     field="PrecursorCharge"        label="Precursor Charge" width="2"/>                        
                    <column type="float"       field="FDR"              label="Cluster-level FDR"        precision="5" tooltip="Cluster-level false discovery rate"/>
            <column type="float"   field="Mean_KL"     label="KL"    precision="3"/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                <parameter name="file"    file="spectra/specs_ms.mgf"/>
                <parameter name="scan"    value="[cluster index]"/>
                <parameter name="compoundname" value="*..*"/>
                <parameter name="peptide" value="{?:peptide}[Peptide]"/>
            </column>
        </row> 
        </block>

    <!-- Overall group by spectrum -->
    <block id="spectra_per_scan_overall" type="table">
            <data>
                        <source type="file" name="clusterinfosummarygroup_attributes/"/>
                        <parsers>
                <parser type="slicedTabular" groupBy="cluster index"   sliceBy="{cluster index}"/>
                        </parsers>
                </data>
                <row>
                        <!--<column type="view" view="cluster_details" field="cluster index" label="Cluster Index" width="18">
                                <parameter name="protein"   value="[cluster index]"/>
                                <parameter name="proteinID" value="[cluster index]"/>
                        </column>-->
                        
                        <column type="integer"     field="cluster index"         label="Cluster Index"            width="3"/>
                        <column type="integer"     field="number of spectra"        label="# Spectra"          width="3"/>
                        <column type="float"       field="precursor mass"       label="Precursor m/z"           precision="5"/>
                        <column type="integer"     field="precursor charge"         label="Precursor Charge"            width="3"/>
                        <column type="float"        field="sum(precursor intensity)"    label="Precursor Intensity"         precision="5"/>
                        <column type="float"        field="RTMean"    label="Retention Time"         width="5"/>
                        <column type="text"        field="DefaultGroups"    label="Default Groups"         width="5"/>
                        <column type="text"        field="AllGroups"    label="User Groups"         width="5"/>
                </row>  
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[cluster index]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}      "/>
                    </column>
                </row>      

    </block>
        
        
        <block id="view_qc_false_results" type="table_ss">
                <data>
                        <source type="file" name="networkqc_falsepositive_with_offsets/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="msgfscore1" operator="ascending"/>
                                <parser type="SQLite"/>
                        </parsers>
                </data>
                <row>
                        <column type="integer"     field="spec1"         label="Cluster Index 1"            width="3" tooltip="Index of first cluster in pair, in clusters file"/>
                        <column type="text"        field="pept1"    label="Peptide 1"    width="18" tooltip="Peptide identification of first cluster in pair" />
                        <column type="text"        field="protein1"    label="Protein 1"    width="10" tooltip="Protein in input database containing sequence of peptide identification of first cluster in pair"/>
                        <column type="integer"     field="cs1"         label="Charge 1"            width="3" tooltip="Identification charge of first cluster in pair"/>
                        
                        <column type="integer"     field="spec2"         label="Cluster Index 2"            width="3" tooltip="Index of second cluster in pair, in clusters file"/>
                        <column type="text"        field="pept2"    label="Peptide 2"    width="18" tooltip="Peptide identification of second cluster in pair"/>
                        <column type="text"        field="protein2"    label="Protein 2"    width="10" tooltip="Protein in input database containing sequence of peptide identification of second cluster in pair"/>
                        <column type="integer"     field="cs2"         label="Charge 2"            width="3" tooltip="Identification charge of second cluster in pair"/>
            <column type="text"        field="All_offsets"    label="Mass Offsets"    width="10" tooltip="Mass offsets present in either peptide in pair, rounded to the nearest integer"/>
                        
                        <column type="float"       field="cosine"       label="Cosine"           precision="4"/>
                        <column type="float"       field="mzdiff"       label="Mass Difference"           precision="4" tooltip="Mass of first cluster in pair minus mass of second cluster in pair"/>
                        
                        <column type="integer"     field="spspair"         label="Pair Is In Network"            width="1" tooltip="These clusters are neighbors in spectral network"/>
                        <column type="integer"     field="correct"         label="Pair Is Correct"            width="1" tooltip="0=incorrect, 1=correct, 2=ambiguous (pair shares over 60% of prefix residue masses)"/>
                </row> 
                <row expander="image">
                        <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                               <parameter name="file"    file="spectra/specs_ms.mgf"/>
                               <parameter name="scan"    value="[spec1]"/>
                               <parameter name="compoundname" value="*..*"/>
                               <parameter name="peptide" value="{?:peptide1}[pept1]"/>
                         </column>
                        <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                               <parameter name="file"    file="spectra/specs_ms.mgf"/>
                               <parameter name="scan"    value="[spec2]"/>
                               <parameter name="compoundname" value="*..*"/>
                               <parameter name="peptide" value="{?:peptide2}[pept2]"/>
                         </column>
                </row> 
        </block>
            
    <!--Peptide categorization-->
    <download>
        <source type="folder" name="categorization/"/>      
    </download>
    
    <block id="categ_table" type="table_ss">
        <data>
            <source type="file" name="categorization/"/>
            <parsers>
                                <parser type="sortedTabular" sortBy="CategoryID" operator="ascending"/>
                                <parser type="SQLite"/>
            </parsers>
        </data>
        <row>
                        <column type="text" field="Category"     label="Category"     width="15"/>
                        <column type="integer" field="CategoryID"     label="Category ID"     width="3"/>
                        <column type="text" field="Workflow1"     label="Algorithm 1 (Later)"     width="10"/>
                        <column type="text" field="Filename1"     label="Filename 1"     width="7"/>    
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="Scan1" label="Cluster Index 1" width="18">
                        <parameter name="clusterindex"   value="[Scan1]"/>
                    </column>
                        <!--<column type="integer" field="Scan1"     label="Cluster Index 1"     width="3"/>-->
                        <column type="text" field="Peptide1"     label="Peptide 1"     width="15"/>    
                        <column type="integer" field="Charge1"     label="Charge 1"     width="3"/>
                        <column type="text" field="Workflow2"     label="Algorithm 2 (Earlier)"     width="7"/>
                        <column type="text" field="Filename2"     label="Filename 2"     width="7"/>            
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="Scan2" label="Cluster Index 2" width="18">
                        <parameter name="clusterindex"   value="[Scan2]"/>
                    </column>
                        <!--<column type="integer" field="Scan2"     label="Cluster Index 2"     width="3"/>-->
                        <column type="text" field="Peptide2"     label="Peptide 2"     width="15"/>
                        <column type="integer" field="Charge2"     label="Charge 2"     width="3"/>
                </row>
                <row expander="image">
                        <column type="jscolumnspectrumviewer" colspan="7" label="Query" width="550" height="350">
                               <parameter name="file"    file="spectra/specs_ms.mgf"/>
                               <parameter name="scan"    value="[Scan1]"/>
                               <parameter name="compoundname" value="*..*"/>
                               <parameter name="peptide" value="{?:peptide1}[Peptide1]"/>
                         </column>
                        <column type="jscolumnspectrumviewer" colspan="7" label="Query" width="550" height="350">
                               <parameter name="file"    file="spectra/specs_ms.mgf"/>
                               <parameter name="scan"    value="[Scan2]"/>
                               <parameter name="compoundname" value="*..*"/>
                               <parameter name="peptide" value="{?:peptide2}[Peptide2]"/>
                         </column>
                </row> 
    </block>    
        <block id="summary_report_new_plaintext" type="stream">
                <data>
                        <source type="file" name="summaryReport_new/"/>
                        <parsers>
                                <parser type="stream" contentType="text/html"/>
                        </parsers>
                </data>
        </block>
    
    <!--NETWORK VISUALIZATIONS--> 
        <block id="network_components_peptide" type="table_ss">
            <data>
                    <source type="file" name="networkcomponents_withpeptide/"/>
                    <parsers>
                            <parser type="sortedTabular" sortBy="NodeCount" operator="descending"/>
                                <parser type="SQLite"/>
                    </parsers>
            </data>
            <row>
            <column type="integer"        field="ComponentIndex" label="Component Index"        width="5"/>
                    <column label="Visualize Network" type="genericurlgenerator" width="12" field="ComponentIndex"> \
                        <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                        <parameter name="REQUESTPARAMETER=view" value="network_displayer_maestro"/>\
                        <parameter name="REQUESTPARAMETER=componentindex" value="[ComponentIndex]"/>\
                        <parameter name="REQUESTPARAMETER=library_annotations" value="view_qc_false_results"/>\ <!--dummy file-->
                        <parameter name="LABEL" value="Visualize Network"/>\
                        <parameter name="USETASK" value="True"/>\
                    </column>\
                    
                    <column label="View Network Nodes" type="genericurlgenerator" width="12" field="ComponentIndex"> \
                        <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                        <parameter name="REQUESTPARAMETER=view" value="all_clusters_sliced_by_comp_index"/>\
                        <parameter name="REQUESTPARAMETER=componentindex" value="[ComponentIndex]"/>\
                        <parameter name="LABEL" value="Network Nodes"/>\
                        <parameter name="USETASK" value="True"/>\
                    </column>\
                    
                    <column type="integer"        field="NodeCount" label="Total Clusters (Nodes)"        width="5"/>
                    <column type="integer"       field="IdentSpectra"           label="Identified Clusters"             width="5"/>
                    <column type="float"       field="PercentID"       label="% Clusters Identified"           precision="2" />
                    <column type="integer"       field="#Spectra"           label="Total Spectra"             width="5"/>
                    <column type="integer"       field="G1Spectra"           label="G1 Identified Spectra"             width="5"/>
                    <column type="integer"       field="G2Spectra"           label="G2 Identified Spectra"             width="5"/>
                    <column type="integer"       field="G3Spectra"           label="G3 Identified Spectra"             width="5"/>
                    <column type="integer"       field="G4Spectra"           label="G4 Identified Spectra"             width="5"/>
                    <column type="integer"       field="G5Spectra"           label="G5 Identified Spectra"             width="5"/>
                    <column type="integer"       field="G6Spectra"           label="G6 Identified Spectra"             width="5"/>
                    <!--[not working?]  <column type="text"       field="AllIDs"           label="All IDs"             width="10"/>-->
            <column type="expandable"       field="AllPeptides"           label="All Peptides"             width="10"/>
            <column type="expandable"       field="AllPeptidesUnmodified"           label="All Peptides Unmodified"             width="10"/>
                    <column type="expandable"       field="ClusterIndices"           label="Cluster Indices"             width="30"/>
                    <column type="text"       field="DefaultGroups"           label="All Default Groups"             width="10"/>
                    <column type="expandable"       field="UserGroups"           label="User Groups"             width="10"/>
                <column type="expandable"       field="VariantGroups"           label="Variant Groups"             width="10"/>
            </row>
    </block>
        <block id="variant_networks_table" type="table_ss">
            <data>
                    <source type="file" name="variant_networks/"/>
                    <parsers>
                            <parser type="tabular" />
                                <parser type="SQLite"/>
                    </parsers>
            </data>
            <row>
            <column type="integer"        field="ComponentIndex" label="Component Index"        width="5"/>
                    <column label="Visualize Network" type="genericurlgenerator" width="14" field="ComponentIndex"> \
                        <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                        <parameter name="REQUESTPARAMETER=view" value="network_displayer_maestro"/>\
                        <parameter name="REQUESTPARAMETER=componentindex" value="[ComponentIndex]"/>\
                        <parameter name="REQUESTPARAMETER=pairs_view_all_components" value="network_pairs_specnets_allcomponents_variant"/>\
                        <parameter name="REQUESTPARAMETER=pairs_view_per_component" value="network_pairs_specnets_componentsliced_variant"/>\
                        <parameter name="REQUESTPARAMETER=node_info_per_component" value="cluster_info_sliced_variant"/>\
                        <parameter name="REQUESTPARAMETER=peptide_ids" value="variant_ids_sliced"/>\
                        <parameter name="REQUESTPARAMETER=library_annotations" value="view_qc_false_results"/>\ <!--dummy file-->
                        <parameter name="REQUESTPARAMETER=displayable_features" value="VariantGroup;RepClusterIndex;parent mass;EvenOdd;Peptide;None"/>\
                        <parameter name="REQUESTPARAMETER=displayable_features_in_info_panel" value="VariantGroup;RepClusterIndex;parent mass;number of spectra;DefaultGroups;precursor charge"/>\
                        <parameter name="REQUESTPARAMETER=spectrum_display_column" value="RepClusterIndex"/>\
                        <parameter name="LABEL" value="Visualize Network"/>\
                        <parameter name="USETASK" value="True"/>\
                    </column>\
            <column type="integer"        field="Num_variants" label="Number of Variants"        width="7"/>
            <column type="integer"        field="Num_clusters" label="Number of Clusters"        width="7"/>
            <column type="expandable"        field="Var_groups" label="All Variant Groups"        width="10"/>
            <column type="expandable"        field="Rep_clusters" label="Representative Cluster Indices"        width="10"/>
            <column type="expandable"        field="All_clusters" label="All Cluster Indices"        width="10"/>
            <column type="expandable" field="Peptides"     label="All Peptides"     width="20"/>
            <column type="expandable" field="Unmod_peptides"     label="All Peptides Unmodified"     width="20"/>
            <column type="text"        field="Default_groups" label="All Default Groups"        width="15"/> 
            </row>
    </block>
        <block id="variant_ids_sliced" type="table">
            <data>
                    <source type="file" name="peptide_ids_variant/"/>
                    <parsers>
                          <parser type="representativeTabular" groupBy="Cluster_index"/>
                          <parser type="slicedTabular" groupBy="ComponentIndex" sliceBy="{componentindex}"/>
                    </parsers>
            </data>
            <row>
            <column type="integer"        field="ComponentIndex" label="Component Index"        width="5"/>
            <column type="integer"        field="Cluster_index" label="Variant Group"        width="5"/>
            <column type="text" field="Peptide"     label="Peptide"     width="15"/>
            </row>
    </block>
        <block id="spec_fams_sliced_by_comp_index" type="table">
                <data>
                        <source type="file" name="networkcomponents_withpeptide/"/>
                        <parsers>
                                <parser type="slicedTabular" groupBy="ComponentIndex"   sliceBy="{compindex}"/>
                        </parsers>
                </data>
            <row>
            <column type="integer"        field="ComponentIndex" label="Component Index"        width="5"/>
                    <column label="Visualize Network" type="genericurlgenerator" width="12" field="ComponentIndex"> \
                        <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                        <parameter name="REQUESTPARAMETER=view" value="network_displayer_maestro"/>\
                        <parameter name="REQUESTPARAMETER=componentindex" value="[ComponentIndex]"/>\
                        <parameter name="REQUESTPARAMETER=library_annotations" value="view_qc_false_results"/>\ <!--dummy file-->
                        <parameter name="LABEL" value="Visualize Network"/>\
                        <parameter name="USETASK" value="True"/>\
                    </column>\
                    
                    <column label="View Network Nodes" type="genericurlgenerator" width="12" field="ComponentIndex"> \
                        <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                        <parameter name="REQUESTPARAMETER=view" value="all_clusters_sliced_by_comp_index"/>\
                        <parameter name="REQUESTPARAMETER=componentindex" value="[ComponentIndex]"/>\
                        <parameter name="LABEL" value="Network Nodes"/>\
                        <parameter name="USETASK" value="True"/>\
                    </column>\
                    
                    <column type="integer"        field="NodeCount" label="Node Count"        width="5"/>
                    <column type="float"       field="%ID"       label="% Identified"           precision="3" />
                    <column type="integer"       field="#Spectra"           label="# Spectra"             width="5"/>
                    <!--[not working?]  <column type="text"       field="AllIDs"           label="All IDs"             width="10"/>-->
            <column type="text"       field="AllPeptides"           label="All Peptides"             width="10"/>
            <column type="text"       field="AllPeptidesUnmodified"           label="All Peptides Unmodified"             width="10"/>
                    <column type="expandable"       field="ClusterIndices"           label="Cluster Indices"             width="30"/>
                    <column type="text"       field="DefaultGroups"           label="All Default Groups"             width="10"/>
                    <column type="text"       field="UserGroups"           label="User Groups"             width="10"/>
                    <column type="integer"       field="G1Spectra"           label="G1 Identified Spectra"             width="5"/>
                    <column type="integer"       field="G2Spectra"           label="G2 Identified Spectra"             width="5"/>
                    <column type="integer"       field="G3Spectra"           label="G3 Identified Spectra"             width="5"/>
                    <column type="integer"       field="G4Spectra"           label="G4 Identified Spectra"             width="5"/>
                    <column type="integer"       field="G5Spectra"           label="G5 Identified Spectra"             width="5"/>
                    <column type="integer"       field="G6Spectra"           label="G6 Identified Spectra"             width="5"/>
            </row>
    </block>
    
        <block id="network_displayer_maestro" type="network_displayer_maestro" display="hidden" loadpeptides="true">
            <data>
                <source type="file" name="networkcomponents/"/>    
                <parsers>
                    <parser type="stream" contentType="text/plain"/>
                </parsers>      
            </data>
        </block> 
        
        <block id="all_clusters_sliced_by_comp_index" type="table">
                <data>
                        <source type="file" name="allClustersOutput/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="cluster index" operator="ascending"/>
                                <parser type="slicedTabular" groupBy="componentindex" sliceBy="{componentindex}"/>
                        </parsers>
                </data>
                <row>
                        <!--<column type="view" view="cluster_details" field="cluster index" label="ClusterIndex" width="18">
                                <parameter name="protein"   value="[cluster index]"/>
                                <parameter name="proteinID" value="[cluster index]"/>
                        </column>-->
                        <column type="integer"     field="cluster index"        label="Cluster Index"          width="3" tooltip="Index of cluster in clusters file. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected"/>
                        <!--<column type="view" view="network_displayer_maestro" field="componentindex" label="Spec Family" width="5">
                                <parameter name="componentindex"   value="[componentindex]"/>
                        </column>-->
                        <column label="Spectral Network" type="genericurlgenerator" width="10" field="componentindex" tooltip="Link to network component containing this cluster, if this cluster is in a network"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="network_displayer_maestro"/>\
                            <parameter name="REQUESTPARAMETER=componentindex" value="[componentindex]"/>\
                            <parameter name="REQUESTPARAMETER=library_annotations" value="view_qc_false_results"/>\ <!--dummy file-->
                            <parameter name="LABEL" value="View Network"/>\
                            <parameter name="USETASK" value="True"/>\
                            <parameter name="IGNORE_VALUE" value="-1"/>\
                            <parameter name="VALUE_TO_CONSIDER" value="[componentindex]"/>\
                        </column>\
                        
                        <!--<column type="parameterlink" target="result.jsp" label="AddToLibrary" includetask="true">
                          <parameter name="view" value="cluster_details"/>
                          <parameter name="protein" value="[cluster index]"/>
                        </column>
                        
                        <column type="parameterlink" target="result.jsp" label="+Challenge" includetask="true">
                          <parameter name="view" value="cluster_details"/>
                          <parameter name="protein" value="[cluster index]"/>
                        </column>-->
                        
                        <column type="integer"     field="number of spectra"        label="# Spectra"          width="3" tooltip="Number of spectra in this cluster"/>
                        <column type="integer"     field="UniqueFileSourcesCount"        label="# Files"          width="3" tooltip="Number of files containing spectra in this cluster"/>
                        <column type="float"       field="precursor mass"       label="Precursor m/z"           precision="5" tooltip="Precursor mass-to-charge ratio"/>
                        <column type="integer"     field="precursor charge"        label="Precursor Charge"          width="3"/>
                        <column type="float"        field="sum(precursor intensity)"    label="Precursor Intensity"         precision="5"/>
                        <column type="float"        field="RTMean"    label="Retention Time"         width="3" tooltip="Mean retention time"/>
                        <column type="text"        field="AllGroups"    label="User-Defined Groups"         width="10" tooltip="User groups (specified in file uploaded to &quot;Group Mapping&quot; section of input form) containing files containing spectra in this cluster" />
                        <column type="text"        field="DefaultGroups"    label="Default Groups"         width="5" tooltip="Default groups (G1 through G6 on input form) containing files containing spectra in this cluster"/>
                        <column type="text"        field="Peptide"   label="Peptide-Spectrum Match (PSM)"         width="5" tooltip="Peptide identification of this cluster"/>
<!--                        <column type="integer"        field="EvenOdd"    label="EvenOdd"         width="5"/>-->
                        <!--<column type="integer"        field="NumberOrganismIDs"    label="Hits"         width="1"/>-->
     <column type="integer" field="G1"     label=" # Spectra G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 1"/>
        <column type="integer" field="G2"     label="# Spectra G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 2"/>
        <column type="integer" field="G3"     label="# Spectra G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 3"/>
        <column type="integer" field="G4"     label="# Spectra G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 4"/>
        <column type="integer" field="G5"     label="# Spectra G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 5"/>
        <column type="integer" field="G6"     label="# Spectra G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 6"/>
                        <column type="text"     field="Highest_count_default"        label="Outlier Group"          width="10" tooltip="Default group with the largest absolute outlier group ratio"/>
                        <column type="float"     field="Specificity_default"        label="Outlier Group Ratio"          width="3" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a default group to the second-highest number of spectra in a default group, or the lowest number of spectra in a default group to the second-lowest number of spectra in a default group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity"/>
      <column type="integer" field="User_G1"     label="# Spectra User G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 1"/>
        <column type="integer" field="User_G2"     label="# Spectra User G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 2"/>
        <column type="integer" field="User_G3"     label="# Spectra User G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 3"/>
        <column type="integer" field="User_G4"     label="# Spectra User G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 4"/>
        <column type="integer" field="User_G5"     label="# Spectra User G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 5"/>
        <column type="integer" field="User_G6"     label="# Spectra User G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 6"/>
        <column type="integer" field="User_G7"     label="# Spectra User G7"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 7"/>
        <column type="integer" field="User_G8"     label="# Spectra User G8"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 8"/>
        <column type="integer" field="User_G9"     label="# Spectra User G9"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 9"/>
        <column type="integer" field="User_G10"     label="# Spectra User G10"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 10"/>
        <column type="integer" field="User_G11"     label="# Spectra User G11"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 11"/>
        <column type="integer" field="User_G12"     label="# Spectra User G12"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 12"/>
        <column type="integer" field="User_G13"     label="# Spectra User G13"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 13"/>
        <column type="integer" field="User_G14"     label="# Spectra User G14"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 14"/>
        <column type="integer" field="User_G15"     label="# Spectra User G15"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 15"/>
        <column type="integer" field="User_G16"     label="# Spectra User G16"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 16"/>
                        <column type="expandable"     field="Highest_count_user"        label="Outlier User Group"          width="10" tooltip="User-defined group with the largest absolute outlier group ratio"/>
                        <column type="float"     field="Specificity_user"        label="Outlier User Group Ratio"          width="3" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a user-defined group to the second-highest number of spectra in a user-defined group, or the lowest number of spectra in a user-defined group to the second-lowest number of spectra in a user-defined group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity"/>
                </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[cluster index]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}      "/>
                    </column>
                </row> 
        </block> 
        
        <block id="all_clusters_sliced_by_cluster_index" type="table">
                <data>
                        <source type="file" name="allClustersOutput/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="cluster index" operator="ascending"/>
                                <parser type="slicedTabular" groupBy="cluster index" sliceBy="{cluster index}"/>
                        </parsers>
                </data>
                <row>
                        <!--<column type="view" view="cluster_details" field="cluster index" label="ClusterIndex" width="18">
                                <parameter name="protein"   value="[cluster index]"/>
                                <parameter name="proteinID" value="[cluster index]"/>
                        </column>-->
                        <column type="integer"     field="cluster index"        label="Cluster Index"          width="3" tooltip="Index of cluster in clusters file. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected"/>
                        <!--<column type="view" view="network_displayer_maestro" field="componentindex" label="Spec Family" width="5">
                                <parameter name="componentindex"   value="[componentindex]"/>
                        </column>-->
                        <column label="Spectral Network" type="genericurlgenerator" width="10" field="componentindex" tooltip="Link to network component containing this cluster, if this cluster is in a network"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="network_displayer_maestro"/>\
                            <parameter name="REQUESTPARAMETER=componentindex" value="[componentindex]"/>\
                            <parameter name="REQUESTPARAMETER=library_annotations" value="view_qc_false_results"/>\ <!--dummy file-->
                            <parameter name="LABEL" value="View Network"/>\
                            <parameter name="USETASK" value="True"/>\
                            <parameter name="IGNORE_VALUE" value="-1"/>\
                            <parameter name="VALUE_TO_CONSIDER" value="[componentindex]"/>\
                        </column>\
                        
                        <!--<column type="parameterlink" target="result.jsp" label="AddToLibrary" includetask="true">
                          <parameter name="view" value="cluster_details"/>
                          <parameter name="protein" value="[cluster index]"/>
                        </column>
                        
                        <column type="parameterlink" target="result.jsp" label="+Challenge" includetask="true">
                          <parameter name="view" value="cluster_details"/>
                          <parameter name="protein" value="[cluster index]"/>
                        </column>-->
                        
                        <column type="integer"     field="number of spectra"        label="# Spectra"          width="3" tooltip="Number of spectra in this cluster"/>
                        <column type="integer"     field="UniqueFileSourcesCount"        label="# Files"          width="3" tooltip="Number of files containing spectra in this cluster"/>
                        <column type="float"       field="precursor mass"       label="Precursor m/z"           precision="5" tooltip="Precursor mass-to-charge ratio"/>
                        <column type="integer"     field="precursor charge"        label="Precursor Charge"          width="3"/>
                        <column type="float"        field="sum(precursor intensity)"    label="Precursor Intensity"         precision="5"/>
                        <column type="float"        field="RTMean"    label="Retention Time"         width="3" tooltip="Mean retention time"/>
                        <column type="text"        field="AllGroups"    label="User-Defined Groups"         width="10" tooltip="User groups (specified in file uploaded to &quot;Group Mapping&quot; section of input form) containing files containing spectra in this cluster" />
                        <column type="text"        field="DefaultGroups"    label="Default Groups"         width="5" tooltip="Default groups (G1 through G6 on input form) containing files containing spectra in this cluster"/>
                        <column type="text"        field="Peptide"   label="Peptide-Spectrum Match (PSM)"         width="5" tooltip="Peptide identification of this cluster"/>
<!--                        <column type="integer"        field="EvenOdd"    label="EvenOdd"         width="5"/>-->
                        <!--<column type="integer"        field="NumberOrganismIDs"    label="Hits"         width="1"/>-->
     <column type="integer" field="G1"     label=" # Spectra G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 1"/>
        <column type="integer" field="G2"     label="# Spectra G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 2"/>
        <column type="integer" field="G3"     label="# Spectra G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 3"/>
        <column type="integer" field="G4"     label="# Spectra G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 4"/>
        <column type="integer" field="G5"     label="# Spectra G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 5"/>
        <column type="integer" field="G6"     label="# Spectra G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 6"/>
                        <column type="text"     field="Highest_count_default"        label="Outlier Group"          width="10" tooltip="Default group with the largest absolute outlier group ratio"/>
                        <column type="float"     field="Specificity_default"        label="Outlier Group Ratio"          width="3" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a default group to the second-highest number of spectra in a default group, or the lowest number of spectra in a default group to the second-lowest number of spectra in a default group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity"/>
      <column type="integer" field="User_G1"     label="# Spectra User G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 1"/>
        <column type="integer" field="User_G2"     label="# Spectra User G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 2"/>
        <column type="integer" field="User_G3"     label="# Spectra User G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 3"/>
        <column type="integer" field="User_G4"     label="# Spectra User G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 4"/>
        <column type="integer" field="User_G5"     label="# Spectra User G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 5"/>
        <column type="integer" field="User_G6"     label="# Spectra User G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 6"/>
        <column type="integer" field="User_G7"     label="# Spectra User G7"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 7"/>
        <column type="integer" field="User_G8"     label="# Spectra User G8"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 8"/>
        <column type="integer" field="User_G9"     label="# Spectra User G9"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 9"/>
        <column type="integer" field="User_G10"     label="# Spectra User G10"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 10"/>
        <column type="integer" field="User_G11"     label="# Spectra User G11"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 11"/>
        <column type="integer" field="User_G12"     label="# Spectra User G12"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 12"/>
        <column type="integer" field="User_G13"     label="# Spectra User G13"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 13"/>
        <column type="integer" field="User_G14"     label="# Spectra User G14"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 14"/>
        <column type="integer" field="User_G15"     label="# Spectra User G15"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 15"/>
        <column type="integer" field="User_G16"     label="# Spectra User G16"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 16"/>
                        <column type="expandable"     field="Highest_count_user"        label="Outlier User Group"          width="10" tooltip="User-defined group with the largest absolute outlier group ratio"/>
                        <column type="float"     field="Specificity_user"        label="Outlier User Group Ratio"          width="3" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a user-defined group to the second-highest number of spectra in a user-defined group, or the lowest number of spectra in a user-defined group to the second-lowest number of spectra in a user-defined group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity"/>
                </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[cluster index]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}      "/>
                    </column>
                </row> 
        </block> 

        <block id="cluster_info_sliced" type="table">
                <data>
                        <source type="file" name="clusterinfosummarygroup_attributes_withIDs_withcomponentID/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="cluster index" operator="ascending"/>
                                <parser type="slicedTabular" groupBy="componentindex" sliceBy="{componentindex}"/>
                        </parsers>
                </data>
                <row>
                        <!--<column type="view" view="cluster_details" field="cluster index" label="ClusterIndex" width="18">
                                <parameter name="protein"   value="[cluster index]"/>
                                <parameter name="proteinID" value="[cluster index]"/>
                        </column>-->
                        
                        <column label="ClusterIdx" type="genericurlgenerator" width="10" field="cluster index"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="cluster_details"/>\
                            <parameter name="REQUESTPARAMETER=protein" value="[cluster index]"/>\
                            <parameter name="LABEL" value="Cluster - [cluster index]"/>\
                            <parameter name="USETASK" value="True"/>\
                        </column>\
                        
                        <!--<column type="view" view="network_displayer_maestro" field="componentindex" label="Spec Family" width="5">
                                <parameter name="componentindex"   value="[componentindex]"/>
                        </column>-->
                        <column label="Spec Family" type="genericurlgenerator" width="10" field="componentindex"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="network_displayer_maestro"/>\
                            <parameter name="REQUESTPARAMETER=componentindex" value="[componentindex]"/>\
                            <parameter name="REQUESTPARAMETER=library_annotations" value="view_qc_false_results"/>\ <!--dummy file-->
                            <parameter name="LABEL" value="View Network"/>\
                            <parameter name="USETASK" value="True"/>\
                            <parameter name="IGNORE_VALUE" value="-1"/>\
                            <parameter name="VALUE_TO_CONSIDER" value="[componentindex]"/>\
                        </column>\
                        
                        <column type="parameterlink" target="result.jsp" label="AddToLibrary" includetask="true">
                          <parameter name="view" value="cluster_details"/>
                          <parameter name="protein" value="[cluster index]"/>
                        </column>
                        
                        <column type="parameterlink" target="result.jsp" label="+Challenge" includetask="true">
                          <parameter name="view" value="cluster_details"/>
                          <parameter name="protein" value="[cluster index]"/>
                        </column>
                        
                        <column type="integer"     field="number of spectra"        label="NumSpectra"          width="3"/>
                        <column type="integer"     field="UniqueFileSourcesCount"        label="NumFiles"          width="3"/>
                        <column type="float"       field="precursor mass"       label="PrecursorMZ"           precision="5"/>
                        <column type="float"        field="sum(precursor intensity)"    label="PrecursorInt"         precision="5"/>
                        <column type="float"        field="RTMean"    label="RTMean"         width="3"/>
                        <column type="text"        field="AllGroups"    label="AllGroups"         width="3"/>
                        <column type="text"        field="DefaultGroups"    label="DefaultGroups"         width="5"/>
<!--                        <column type="integer"        field="EvenOdd"    label="EvenOdd"         width="5"/>-->
                        <column type="text"        field="LibraryID"    label="LibraryID"         width="20"/>
                        <column type="integer"        field="NumberOrganismIDs"    label="Hits"         width="1"/>
                </row>
                <row expander="image">
                  <column type="jscolumnspectrumviewer" colspan="5">
                      <parameter name="file"    file="spectra/specs_ms.mgf"/>
                      <parameter name="scan"    value="[cluster index]"/>
                      <parameter name="compoundname"    value="[LibraryID]"/>
                      <parameter name="trim" value="true"/>
                  </column>
                </row>
                
                
                <row expander="down:up">
                  <column type="block" block="related_network_list_specnets" colspan="7">
                    <parameter name="spectraid" value="[cluster index]"/>
                  </column>
                </row>
        </block> 

        <block id="cluster_info_sliced_variant" type="table">
                <data>
                        <source type="file" name="clusterinfosummarygroup_attributes_withIDs_withcomponentID_variant/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="cluster index" operator="ascending"/>
                                <parser type="slicedTabular" groupBy="componentindex" sliceBy="{componentindex}"/>
                        </parsers>
                </data>
                <row>
                        <!--<column type="view" view="cluster_details" field="cluster index" label="ClusterIndex" width="18">
                                <parameter name="protein"   value="[cluster index]"/>
                                <parameter name="proteinID" value="[cluster index]"/>
                        </column>-->
                        
                        <column label="ClusterIdx" type="genericurlgenerator" width="10" field="cluster index"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="cluster_details"/>\
                            <parameter name="REQUESTPARAMETER=protein" value="[cluster index]"/>\
                            <parameter name="LABEL" value="Cluster - [cluster index]"/>\
                            <parameter name="USETASK" value="True"/>\
                        </column>\
                        
                        <!--<column type="view" view="network_displayer_maestro" field="componentindex" label="Spec Family" width="5">
                                <parameter name="componentindex"   value="[componentindex]"/>
                        </column>-->
                        <column label="Spec Family" type="genericurlgenerator" width="10" field="componentindex"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="network_displayer_maestro"/>\
                            <parameter name="REQUESTPARAMETER=componentindex" value="[componentindex]"/>\
                            <parameter name="REQUESTPARAMETER=library_annotations" value="view_qc_false_results"/>\ <!--dummy file-->
                            <parameter name="LABEL" value="View Network"/>\
                            <parameter name="USETASK" value="True"/>\
                            <parameter name="IGNORE_VALUE" value="-1"/>\
                            <parameter name="VALUE_TO_CONSIDER" value="[componentindex]"/>\
                        </column>\
                        
                        <column type="parameterlink" target="result.jsp" label="AddToLibrary" includetask="true">
                          <parameter name="view" value="cluster_details"/>
                          <parameter name="protein" value="[cluster index]"/>
                        </column>
                        
                        <column type="parameterlink" target="result.jsp" label="+Challenge" includetask="true">
                          <parameter name="view" value="cluster_details"/>
                          <parameter name="protein" value="[cluster index]"/>
                        </column>
                        
                        <column type="integer"     field="number of spectra"        label="NumSpectra"          width="3"/>
                        <column type="integer"     field="UniqueFileSourcesCount"        label="NumFiles"          width="3"/>
                        <column type="float"       field="precursor mass"       label="PrecursorMZ"           precision="5"/>
                        <column type="float"        field="sum(precursor intensity)"    label="PrecursorInt"         precision="5"/>
                        <column type="float"        field="RTMean"    label="RTMean"         width="3"/>
                        <column type="text"        field="AllGroups"    label="AllGroups"         width="3"/>
                        <column type="text"        field="DefaultGroups"    label="DefaultGroups"         width="5"/>
<!--                        <column type="integer"        field="EvenOdd"    label="EvenOdd"         width="5"/>-->
                        <column type="text"        field="LibraryID"    label="LibraryID"         width="20"/>
                        <column type="integer"        field="NumberOrganismIDs"    label="Hits"         width="1"/>
                </row>
                <row expander="image">
                  <column type="jscolumnspectrumviewer" colspan="5">
                      <parameter name="file"    file="spectra/specs_ms.mgf"/>
                      <parameter name="scan"    value="[cluster index]"/>
                      <parameter name="compoundname"    value="[LibraryID]"/>
                      <parameter name="trim" value="true"/>
                  </column>
                </row>
                
                
                <row expander="down:up">
                  <column type="block" block="related_network_list_specnets" colspan="7">
                    <parameter name="spectraid" value="[cluster index]"/>
                  </column>
                </row>
        </block> 

        <block id="network_pairs_specnets_componentsliced" type="table">
                <data>
                        <source type="file" name="networkedges_selfloop/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="CLUSTERID1" operator="ascending"/>
                                <parser type="slicedTabular" groupBy="ComponentIndex" sliceBy="{componentindex}"/>
                        </parsers>
                </data>
                <row>
                        <column type="integer"        field="CLUSTERID1" label="Cluster Index 1"        width="10"/>
                        <column type="integer"        field="CLUSTERID2" label="Cluster Index 2"        width="10"/>
                        <column type="float"       field="Cosine"       label="Cosine Score"           precision="5" />
                        <column type="float"       field="DeltaMZ"           label="m/z Difference"             precision="5"/>
                        <column type="integer"       field="ComponentIndex"           label="m/z Difference"             width="1"/>
                </row>
                
                <row expander="image">
                    <column type="stream" invoke="annotatedSpectrumImageThumbnail" contentType="image/png" colspan="5">
                        <parameter name="file"    file="[FileName]"/>
                        <parameter name="scan"    value="[Node1]"/>
                        <parameter name="peptide" value="{?:peptide1}*..*"/>
                        <parameter name="trim" value="true"/>
                    </column>
                    <column type="stream" invoke="annotatedSpectrumImageThumbnail" contentType="image/png" colspan="5">
                        <parameter name="file"    file="[FileName]"/>
                        <parameter name="scan"    value="[Node2]"/>
                        <parameter name="peptide" value="{?:peptide2}*..*"/>
                        <parameter name="trim" value="true"/>
                    </column>
                </row>
        </block>

        <block id="network_pairs_specnets_componentsliced_variant" type="table">
                <data>
                        <source type="file" name="networkedges_selfloop_variant/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="CLUSTERID1" operator="ascending"/>
                                <parser type="slicedTabular" groupBy="ComponentIndex" sliceBy="{componentindex}"/>
                        </parsers>
                </data>
                <row>
                        <column type="integer"        field="CLUSTERID1" label="Cluster Index 1"        width="10"/>
                        <column type="integer"        field="CLUSTERID2" label="Cluster Index 2"        width="10"/>
                        <column type="float"       field="Cosine"       label="Cosine Score"           precision="5" />
                        <column type="float"       field="DeltaMZ"           label="m/z Difference"             precision="5"/>
                        <column type="integer"       field="ComponentIndex"           label="m/z Difference"             width="1"/>
                </row>
                
                <row expander="image">
                    <column type="stream" invoke="annotatedSpectrumImageThumbnail" contentType="image/png" colspan="5">
                        <parameter name="file"    file="[FileName]"/>
                        <parameter name="scan"    value="[Node1]"/>
                        <parameter name="peptide" value="{?:peptide1}*..*"/>
                        <parameter name="trim" value="true"/>
                    </column>
                    <column type="stream" invoke="annotatedSpectrumImageThumbnail" contentType="image/png" colspan="5">
                        <parameter name="file"    file="[FileName]"/>
                        <parameter name="scan"    value="[Node2]"/>
                        <parameter name="peptide" value="{?:peptide2}*..*"/>
                        <parameter name="trim" value="true"/>
                    </column>
                </row>
        </block>

        <block id="pairs_histogram" type="chartdisplayer">
            <data>
                <source type="file" name="result/"/>
                <parsers>
                    <parser type="stream" contentType="text/plain"/>
                </parsers>
            </data>
        </block> 
        
        <block id="clusters_list_specnets_withID_beta" type="table_ss">
                <data>
                        <source type="file" name="allClustersOutput/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="cluster index" operator="ascending"/>
                                <parser type="SQLite"/>
                        </parsers>
                </data>
                <row>
                        <!--<column type="view" view="cluster_details" field="cluster index" label="ClusterIndex" width="18">
                                <parameter name="protein"   value="[cluster index]"/>
                                <parameter name="proteinID" value="[cluster index]"/>
                        </column>-->
                        <column type="integer"     field="cluster index"        label="Cluster Index"          width="3" tooltip="Index of cluster in clusters file. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected"/>
                        <!--<column type="view" view="network_displayer_maestro" field="componentindex" label="Spec Family" width="5">
                                <parameter name="componentindex"   value="[componentindex]"/>
                        </column>-->
                        <column label="Spectral Network" type="genericurlgenerator" width="10" field="componentindex" tooltip="Link to network component containing this cluster, if this cluster is in a network"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="network_displayer_maestro"/>\
                            <parameter name="REQUESTPARAMETER=componentindex" value="[componentindex]"/>\
                            <parameter name="REQUESTPARAMETER=library_annotations" value="view_qc_false_results"/>\ <!--dummy file-->
                            <parameter name="LABEL" value="View Network"/>\
                            <parameter name="USETASK" value="True"/>\
                            <parameter name="IGNORE_VALUE" value="-1"/>\
                            <parameter name="VALUE_TO_CONSIDER" value="[componentindex]"/>\
                        </column>\
                        
                        <!--<column type="parameterlink" target="result.jsp" label="AddToLibrary" includetask="true">
                          <parameter name="view" value="cluster_details"/>
                          <parameter name="protein" value="[cluster index]"/>
                        </column>
                        
                        <column type="parameterlink" target="result.jsp" label="+Challenge" includetask="true">
                          <parameter name="view" value="cluster_details"/>
                          <parameter name="protein" value="[cluster index]"/>
                        </column>-->
                        
                        <column type="integer"     field="number of spectra"        label="# Spectra"          width="3" tooltip="Number of spectra in this cluster"/>
                        <column type="integer"     field="UniqueFileSourcesCount"        label="# Files"          width="3" tooltip="Number of files containing spectra in this cluster"/>
                        <column type="float"       field="precursor mass"       label="Precursor m/z"           precision="5" tooltip="Precursor mass-to-charge ratio"/>
                        <column type="integer"     field="precursor charge"        label="Precursor Charge"          width="3"/>
                        <column type="float"        field="sum(precursor intensity)"    label="Precursor Intensity"         precision="5"/>
                        <column type="float"        field="RTMean"    label="Retention Time"         width="3" tooltip="Mean retention time"/>
                        <column type="text"        field="AllGroups"    label="User-Defined Groups"         width="10" tooltip="User groups (specified in file uploaded to &quot;Group Mapping&quot; section of input form) containing files containing spectra in this cluster" />
                        <column type="text"        field="DefaultGroups"    label="Default Groups"         width="5" tooltip="Default groups (G1 through G6 on input form) containing files containing spectra in this cluster"/>
                        <column type="text"        field="Peptide"   label="Peptide-Spectrum Match (PSM)"         width="5" tooltip="Peptide identification of this cluster"/>
<!--                        <column type="integer"        field="EvenOdd"    label="EvenOdd"         width="5"/>-->
                        <!--<column type="integer"        field="NumberOrganismIDs"    label="Hits"         width="1"/>-->
     <column type="integer" field="G1"     label=" # Spectra G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 1"/>
        <column type="integer" field="G2"     label="# Spectra G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 2"/>
        <column type="integer" field="G3"     label="# Spectra G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 3"/>
        <column type="integer" field="G4"     label="# Spectra G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 4"/>
        <column type="integer" field="G5"     label="# Spectra G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 5"/>
        <column type="integer" field="G6"     label="# Spectra G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 6"/>
                        <column type="text"     field="Highest_count_default"        label="Outlier Group"          width="10" tooltip="Default group with the largest absolute outlier group ratio"/>
                        <column type="float"     field="Specificity_default"        label="Outlier Group Ratio"          width="3" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a default group to the second-highest number of spectra in a default group, or the lowest number of spectra in a default group to the second-lowest number of spectra in a default group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity"/>
      <column type="integer" field="User_G1"     label="# Spectra User G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 1"/>
        <column type="integer" field="User_G2"     label="# Spectra User G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 2"/>
        <column type="integer" field="User_G3"     label="# Spectra User G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 3"/>
        <column type="integer" field="User_G4"     label="# Spectra User G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 4"/>
        <column type="integer" field="User_G5"     label="# Spectra User G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 5"/>
        <column type="integer" field="User_G6"     label="# Spectra User G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 6"/>
        <column type="integer" field="User_G7"     label="# Spectra User G7"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 7"/>
        <column type="integer" field="User_G8"     label="# Spectra User G8"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 8"/>
        <column type="integer" field="User_G9"     label="# Spectra User G9"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 9"/>
        <column type="integer" field="User_G10"     label="# Spectra User G10"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 10"/>
        <column type="integer" field="User_G11"     label="# Spectra User G11"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 11"/>
        <column type="integer" field="User_G12"     label="# Spectra User G12"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 12"/>
        <column type="integer" field="User_G13"     label="# Spectra User G13"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 13"/>
        <column type="integer" field="User_G14"     label="# Spectra User G14"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 14"/>
        <column type="integer" field="User_G15"     label="# Spectra User G15"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 15"/>
        <column type="integer" field="User_G16"     label="# Spectra User G16"     width="2" tooltip="Number of spectra in this cluster in files assigned to user group 16"/>
                        <column type="expandable"     field="Highest_count_user"        label="Outlier User Group"          width="10" tooltip="User-defined group with the largest absolute outlier group ratio"/>
                        <column type="float"     field="Specificity_user"        label="Outlier User Group Ratio"          width="3" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a user-defined group to the second-highest number of spectra in a user-defined group, or the lowest number of spectra in a user-defined group to the second-lowest number of spectra in a user-defined group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity"/>
                </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[cluster index]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}      "/>
                    </column>
                </row> 
        </block>

        <block id="network_pairs_specnets_allcomponents" type="table">
                <data>
                        <source type="file" name="networkedges_selfloop/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="CLUSTERID1" operator="ascending"/>
                        </parsers>
                </data>
                <row>
                        <column type="integer"        field="CLUSTERID1" label="Cluster Index 1"        width="10"/>
                        <column type="integer"        field="CLUSTERID2" label="Cluster Index 2"        width="10"/>
                        <column type="float"       field="Cosine"       label="Cosine Score"           precision="5" />
                        <column type="float"       field="DeltaMZ"           label="m/z Difference"             precision="5"/>
                        <column type="integer"       field="ComponentIndex"           label="m/z Difference"             width="1"/>
                </row>
                
                <row expander="image">
                    <column type="stream" invoke="annotatedSpectrumImageThumbnail" contentType="image/png" colspan="5">
                        <parameter name="file"    file="[FileName]"/>
                        <parameter name="scan"    value="[Node1]"/>
                        <parameter name="peptide" value="{?:peptide1}*..*"/>
                        <parameter name="trim" value="true"/>
                    </column>
                    <column type="stream" invoke="annotatedSpectrumImageThumbnail" contentType="image/png" colspan="5">
                        <parameter name="file"    file="[FileName]"/>
                        <parameter name="scan"    value="[Node2]"/>
                        <parameter name="peptide" value="{?:peptide2}*..*"/>
                        <parameter name="trim" value="true"/>
                    </column>
                </row>
        </block>
 
        <block id="network_pairs_specnets_allcomponents_variant" type="table">
                <data>
                        <source type="file" name="networkedges_selfloop_variant/"/>
                        <parsers>
                                <parser type="sortedTabular" sortBy="CLUSTERID1" operator="ascending"/>
                        </parsers>
                </data>
                <row>
                        <column type="integer"        field="CLUSTERID1" label="Cluster Index 1"        width="10"/>
                        <column type="integer"        field="CLUSTERID2" label="Cluster Index 2"        width="10"/>
                        <column type="float"       field="Cosine"       label="Cosine Score"           precision="5" />
                        <column type="float"       field="DeltaMZ"           label="m/z Difference"             precision="5"/>
                        <column type="integer"       field="ComponentIndex"           label="m/z Difference"             width="1"/>
                </row>
                
                <row expander="image">
                    <column type="stream" invoke="annotatedSpectrumImageThumbnail" contentType="image/png" colspan="5">
                        <parameter name="file"    file="[FileName]"/>
                        <parameter name="scan"    value="[Node1]"/>
                        <parameter name="peptide" value="{?:peptide1}*..*"/>
                        <parameter name="trim" value="true"/>
                    </column>
                    <column type="stream" invoke="annotatedSpectrumImageThumbnail" contentType="image/png" colspan="5">
                        <parameter name="file"    file="[FileName]"/>
                        <parameter name="scan"    value="[Node2]"/>
                        <parameter name="peptide" value="{?:peptide2}*..*"/>
                        <parameter name="trim" value="true"/>
                    </column>
                </row>
        </block>
        
        <block id="view_raw_spectra" type="table_ss">
            <data>
                <source type="file" name="allclustered_spectra_info_withpath/"/>
            <parsers>
                <parser type="sortedTabular" sortBy="cluster index" operator="ascending"/>
                                <parser type="SQLite"/>
            </parsers>
        </data>
        <row>
                    <column type="text"     field="Original_Path"        label="Filename"          width="10" tooltip="Name of original input spectrum file containing this spectrum"/>
                    <column type="integer"     field="ScanNumber"        label="Scan"          width="3" tooltip="Scan number of this spectrum in original input spectrum file"/>
                    <column type="view" view="all_clusters_sliced_by_cluster_index" field="cluster index" label="Cluster Index" width="18" tooltip="Index of the cluster containing this spectrum. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected">
                        <parameter name="cluster index"   value="[cluster index]"/>
                    </column>
                    <column type="float"     field="sum(precursor intensity)"        label="Precursor Intensity"          precision="3"/>
                    <column type="float"     field="RTMean"        label="Retention Time"          precision="3" tooltip="Mean retention time"/>
                    <column type="float"     field="parent mass"        label="Parent Mass"          precision="3"/>                        
                    <column type="integer"     field="PrecursorCharge"        label="Precursor Charge" width="2"/>                        
            <column type="float"   field="Mean_KL"     label="KL"    precision="3" tooltip="Kullback-Leibler divergence"/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                <parameter name="file"    file="spectra/specs_ms.mgf"/>
                <parameter name="scan"    value="[cluster index]"/>
                <parameter name="compoundname" value="*..*"/>
                <parameter name="peptide" value="{?:peptide}      "/>
            </column>
        </row> 
    </block>


        <block id="view_raw_spectra_new" type="table_ss">
            <data>
                <source type="file" name="rawSpectra_withSpecIndex/"/>
            <parsers>
                <parser type="sortedTabular" sortBy="cluster index" operator="ascending"/>
                                <parser type="SQLite"/>
            </parsers>
        </data>
        <row>
                    <column type="text"     field="Original_Path"        label="Filename"          width="10" tooltip="Name of original input spectrum file containing this spectrum"/>
                    <column type="integer"     field="ScanNumber"        label="Scan"          width="3" tooltip="Scan number of this spectrum in original input spectrum file"/>
                    <column type="view" view="all_clusters_sliced_by_cluster_index" field="cluster index" label="Cluster Index" width="18" tooltip="Index of the cluster containing this spectrum. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected">
                        <parameter name="cluster index"   value="[cluster index]"/>
                    </column>
                    <column type="float"     field="sum(precursor intensity)"        label="Precursor Intensity"          precision="3"/>
                    <column type="float"     field="RTMean"        label="Retention Time"          precision="3" tooltip="Mean retention time"/>
                    <column type="float"     field="parent mass"        label="Parent Mass"          precision="3"/>                        
                    <column type="integer"     field="PrecursorCharge"        label="Precursor Charge" width="2"/>                        
            <column type="float"   field="Mean_KL"     label="KL"    precision="3" tooltip="Kullback-Leibler divergence"/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="5" label="Input Spectrum" width="550" height="350">
                <parameter name="file"    file="[Original_Path]"/>
                <parameter name="scan"    value="[ScanNumber]"/>
                <parameter name="compoundname" value="*..*"/>
                <parameter name="peptide" value="{?:peptide}      "/>
            </column>
            <column type="jscolumnspectrumviewer" colspan="5" label="Cluster Consensus Spectrum" width="550" height="350">
                <parameter name="file"    file="spectra/specs_ms.mgf"/>
                <parameter name="scan"    value="[cluster index]"/>
                <parameter name="compoundname" value="*..*"/>
                <parameter name="peptide" value="{?:peptide}      "/>
            </column>
        </row> 
    </block>


        <block id="view_raw_spectra_id_only" type="table_ss">
            <data>
                <source type="file" name="rawSpectraIdOnly/"/>
            <parsers>
                <parser type="sortedTabular" sortBy="cluster index" operator="ascending"/>
                <parser type="SQLite"/>
            </parsers>
        </data>
        <row>
                    <column type="text"     field="Original_Path"        label="Filename"          width="10"/>
                    <column type="integer"     field="ScanNumber"        label="Scan"          width="3"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="cluster index" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[cluster index]"/>
                    </column>
                    <column type="text"     field="Peptide"        label="Peptide"          width="10"/>
                    <column type="text"    field="Protein"        label="Protein"       width="18"/>
                    <column type="float"     field="sum(precursor intensity)"        label="Precursor Int"          precision="3"/>
                    <column type="float"     field="RTMean"        label="Retention Time"          precision="3"/>
                    <column type="float"     field="parent mass"        label="Parent Mass"          precision="3"/>                        
                    <column type="integer"     field="PrecursorCharge"        label="Precursor Charge" width="2"/>                        
                    <column type="float"       field="FDR"              label="Cluster-level FDR"        precision="5" tooltip="Cluster-level false discovery rate"/>
            <column type="float"   field="Mean_KL"     label="KL"    precision="3"/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="5" label="Input Spectrum" width="550" height="350">
                <parameter name="file"    file="[Original_Path]"/>
                <parameter name="scan"    value="[ScanNumber]"/>
                <parameter name="compoundname" value="*..*"/>
                <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                <parameter name="charge" value="[PrecursorCharge]" />
            </column>
            <column type="jscolumnspectrumviewer" colspan="5" label="Cluster Consensus Spectrum" width="550" height="350">
                <parameter name="file"    file="spectra/specs_ms.mgf"/>
                <parameter name="scan"    value="[cluster index]"/>
                <parameter name="compoundname" value="*..*"/>
                <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                <parameter name="charge" value="[PrecursorCharge]" />
            </column>
        </row> 
    </block>

    <!-- BEGIN standard mzTab result view specifications -->

    <view id="view_result_list" label="mzTab Result Files" group="Overall Views">
        <blockRef id="main" type="file_list"/>
    </view>
    <block id="file_list" type="table">
        <data>
            <source type="file" name="statistics/"/>
            <parsers>
                <parser type="tabular"/>
            </parsers>
        </data>
        <row>
            <column type="text"                                    field="Uploaded_file"    label="Result File"                 width="12"/>
            <column type="fdrview" view="group_by_spectrum"        field="Found_PSMs"       label="Total PSMs"                  width="3" preload="Yes">
                <parameter name="file" value="[File_descriptor]"/>
                <parameter name="fdr"  value="FDR"/>
            </column>
            <column type="numberview" view="group_by_spectrum"     field="Invalid_PSM_rows" label="Invalid PSMs"                width="3" preload="Yes">
                <parameter name="file" value="[File_descriptor]"/>
                <parameter name="hash" value="#{%22valid_input%22%3A%22INVALID%22}"/>
            </column>
            <column type="fdrview" view="group_by_peptide"         field="Peptide_rows"     label="Peptides"                    width="3" preload="Yes">
                <parameter name="file" value="[File_descriptor]"/>
                <parameter name="fdr"  value="Peptide_FDR"/>
            </column>
            <column type="fdrview" view="group_by_peptide_derived" field="Found_Variants"   label="Peptides (Derived)"          width="3" preload="Yes">
                <parameter name="file" value="[File_descriptor]"/>
                <parameter name="fdr"  value="Peptide_FDR"/>
            </column>
            <column type="fdrview" view="identified_proteins"         field="Protein_rows"     label="Proteins"                    width="3" preload="Yes">
                <parameter name="file" value="[File_descriptor]"/>
                <parameter name="fdr"  value="Protein_FDR"/>
            </column>
            <column type="fdrview" view="group_by_protein_derived" field="Found_Proteins"   label="Proteins (Derived)"          width="3" preload="Yes">
                <parameter name="file" value="[File_descriptor]"/>
                <parameter name="fdr"  value="Protein_FDR"/>
            </column>
            <column type="view"       view="identified_proteins"      value="View"             label="&quot;One-Hit Wonders&quot;" width="3" preload="Yes" tooltip="Proteins identified by exactly one peptide.">
                <parameter name="file" value="[File_descriptor]"/>
                <parameter name="hash" value="#{%22Peptides_lowerinput%22%3A%221%22%2C%22Peptides_upperinput%22%3A%221%22}"/>
            </column>
            <column type="view"       view="group_by_ptm"          value="View"             label="PTMs"                        width="3" preload="Yes" tooltip="Spectrum identifications, grouped by unique sets of post-translational modifications.">
                <parameter name="file" value="[File_descriptor]"/>
            </column>
        </row>
    </block>
    
    <!-- PSM views -->
    <view id="group_by_spectrum" display="hidden">
        <blockRef id="main" type="spectrum_list"/>
    </view>
    <block id="spectrum_list" type="table_ss">
        <data>
            <source type="file" name="{file}"/>
            <parsers>
                <parser type="mzTab"/>
                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="mzTab"/>
                <processor type="fileDescriptor"     field="#SpecFile"/>
                <processor type="nativeID"           field="nativeID"/>
                <processor type="baseFilename"       field="internalFilename"  newField="baseFilename"/>
                <processor type="stringSubstitution" field="sequence"          replacedField="sequence_li"          search="I" replace="L"/>
                <processor type="stringSubstitution" field="modified_sequence" replacedField="modified_sequence_li" search="I" replace="L"/>
            </processors>
        </data>
        <row>
            <column type="integer" field="PSM_ID"            label="PSM ID"         width="3"  tooltip="PSM ID from within the source MzTab file"/>
            <column type="text"    field="#SpecFile"         label="Peak List File" width="12" tooltip="The name of the peak list file from which this spectrum came, as referenced from within the source MzTab file"/>
            <column type="integer" field="nativeID_index"    label="Index"          width="3"  tooltip="Spectrum index (0-based) in the file."/>
            <column type="integer" field="nativeID_scan"     label="Scan"           width="3"  tooltip="Spectrum scan number"/>
            <column type="text"    field="modified_sequence" label="Peptide"        width="18" tooltip="The modified peptide sequence matched to this spectrum"/>
            <column type="text"    field="modifications"     label="Modifications"  width="18" tooltip="The positions and accessions of all post-translational modifications found for this spectrum identification"/>
            <column type="text"    field="accession"         label="Protein"        width="18" tooltip="The accession of the protein matched to this spectrum"/>
            <column type="integer" field="charge"            label="Charge"         width="1"  tooltip="Precursor ion charge"/>
            <column type="text"    field="search_engine"     label="Search Engine"  width="12" tooltip="Search engine used to generate this identification"/>
            <column type="text"    field="valid"             label="Valid"          width="7"  tooltip="If a spectrum could not be found in the source peak list file, or if the identification contains any ambiguous PTM references, then it will be marked as &quot;INVALID&quot;."/>
                <!--<column label="Add to Library" type="genericurlgenerator" width="12"> \
                    <parameter name="URLBASE" value="/ProteoSAFe/addToLibrary.jsp"/>\
                    <parameter name="REQUESTPARAMETER=file" value="[#SpecFile]"/>\
                    <parameter name="REQUESTPARAMETER=scan" value="[nativeID_scan]"/>\
                    <parameter name="REQUESTPARAMETER=index" value="[nativeID_index]"/>\
                    <parameter name="REQUESTPARAMETER=charge" value="[charge]"/>\
                    <parameter name="REQUESTPARAMETER=mass" value="[_dyn_#parent_mass]"/>\
                    <parameter name="REQUESTPARAMETER=proteins" value="[accession]"/>\
                    <parameter name="REQUESTPARAMETER=peptide" value="[modified_sequence]"/>\
                    <parameter name="LABEL" value="Link"/>\
                    <parameter name="USETASK" value="True"/>\
                    <parameter name="PASS_URL" value="True"/>\
                </column>-->
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="20" width="600" height="500">
                <parameter name="file"      file="[internalFilename]"/>
                <parameter name="scan"      value="[nativeID_scan]"/>
                <parameter name="index"     value="[nativeID_index_1-based]"/>
                <parameter name="peptide"   value="[modified_sequence]"/>
                <parameter name="modformat" value="inspect"/>
                <parameter name="trim"      value="true"/>
            </column>
        </row>
        <row expander="down:up">
            <column type="block" block="psms_per_spectrum" colspan="9">
                    <parameter name="file"     value="{file}"/>
                <parameter name="spectrum" value="[PSM_ID]"/>
            </column>
        </row>
    </block>
    <block id="psms_per_spectrum" type="table_ss">
        <data>
            <source type="file" name="{file}"/>
            <parsers>
                <parser type="mzTab"/>
                <parser type="slicedTabular" groupBy="PSM_ID" sliceBy="{spectrum}"/>
                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="mzTab"/>
                <processor type="fileDescriptor"     field="#SpecFile"/>
                <processor type="nativeID"           field="nativeID"/>
                <processor type="baseFilename"       field="internalFilename"  newField="baseFilename"/>
                <processor type="stringSubstitution" field="sequence"          replacedField="sequence_li"          search="I" replace="L"/>
                <processor type="stringSubstitution" field="modified_sequence" replacedField="modified_sequence_li" search="I" replace="L"/>
            </processors>
        </data>
        <row>
            <column type="integer" field="PSM_ID"        label="PSM ID"        width="3"  tooltip="PSM ID from within the source MzTab file"/>
            <column type="text"    field="accession"     label="Protein"       width="18" tooltip="The accession of the protein matched to this spectrum"/>
            <column type="integer" field="charge"        label="Charge"        width="1"  tooltip="Precursor ion charge"/>
            <column type="text"    field="search_engine" label="Search Engine" width="12" tooltip="Search engine used to generate this identification"/>
            <column type="text"    field="valid"         label="Valid"         width="7"  tooltip="If a spectrum could not be found in the source peak list file, or if the identification contains any ambiguous PTM references, then it will be marked as &quot;INVALID&quot;."/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="20" width="600" height="500">
                <parameter name="file"      file="[internalFilename]"/>
                <parameter name="scan"      value="[nativeID_scan]"/>
                <parameter name="index"     value="[nativeID_index_1-based]"/>
                <parameter name="peptide"   value="[modified_sequence]"/>
                <parameter name="modformat" value="inspect"/>
                <parameter name="trim"      value="true"/>
            </column>
        </row>
    </block>
    
    <!-- Peptide views -->
    <view id="group_by_peptide" display="hidden">
        <blockRef id="main" type="peptide_list"/>
    </view>
    <view id="group_by_peptide_derived" display="hidden">
        <blockRef id="main" type="peptide_list"/>
    </view>
    <block id="peptide_list" type="table_ss">
        <data>
            <source type="file" name="{file}"/>
            <parsers>
                <parser type="mzTab"/>
                <parser type="representativeTabular" groupBy="variant" selectBy="PSM_ID" operator="min"/>
				<parser type="sortedTabular"         sortBy="sequence" operator="ascending"/>
				<parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="mzTab"/>
                <processor type="fileDescriptor"     field="#SpecFile"/>
                <processor type="nativeID"           field="nativeID"/>
                <processor type="baseFilename"       field="internalFilename"  newField="baseFilename"/>
                <processor type="stringSubstitution" field="sequence"          replacedField="sequence_li"          search="I" replace="L"/>
                <processor type="stringSubstitution" field="modified_sequence" replacedField="modified_sequence_li" search="I" replace="L"/>
            </processors>
        </data>
        <row>
            <column type="integer" field="PSM_ID"            label="PSM ID"           width="3"  tooltip="PSM ID from within the source MzTab file"/>
            <column type="text"    field="#SpecFile"         label="Peak List File"   width="12" tooltip="The name of the peak list file from which this spectrum came, as referenced from within the source MzTab file"/>
            <column type="integer" field="nativeID_index"    label="Index"            width="3"  tooltip="Spectrum index (0-based) in the file."/>
            <column type="integer" field="nativeID_scan"     label="Scan"             width="3"  tooltip="Spectrum scan number"/>
            <column type="text"    field="sequence"          label="Peptide"          width="18" tooltip="The unmodified peptide sequence matched to this spectrum"/>
            <column type="text"    field="modified_sequence" label="Modified Peptide" width="18" tooltip="The modified peptide sequence matched to this spectrum"/>
            <column type="text"    field="modifications"     label="Modifications"  width="18" tooltip="The positions and accessions of all post-translational modifications found for this spectrum identification"/>
            <column type="text"    field="accession"         label="Protein"          width="18" tooltip="The accession of the protein matched to this spectrum"/>
            <column type="integer" field="charge"            label="Charge"           width="1"  tooltip="Precursor ion charge"/>
            <column type="text"    field="search_engine"     label="Search Engine"    width="12" tooltip="Search engine used to generate this identification"/>
            <column type="text"    field="valid"             label="Valid"            width="7"  tooltip="If a spectrum could not be found in the source peak list file, or if the identification contains any ambiguous PTM references, then it will be marked as &quot;INVALID&quot;."/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="20" width="600" height="500">
                <parameter name="file"      file="[internalFilename]"/>
                <parameter name="scan"      value="[nativeID_scan]"/>
                <parameter name="index"     value="[nativeID_index_1-based]"/>
                <parameter name="peptide"   value="[modified_sequence]"/>
                <parameter name="modformat" value="inspect"/>
                <parameter name="trim"      value="true"/>
            </column>
        </row>
        <row expander="down:up">
            <column type="block" block="spectra_per_peptide" colspan="9">
                <parameter name="file"    value="{file}"/>
                <parameter name="variant" value="[variant]"/>
            </column>
        </row>
    </block>
    <block id="spectra_per_peptide" type="table_ss">
        <data>
            <source type="file" name="{file}"/>
            <parsers>
                <parser type="mzTab"/>
                <parser type="slicedTabular" groupBy="variant" sliceBy="{variant}"/>
                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="mzTab"/>
                <processor type="fileDescriptor"     field="#SpecFile"/>
                <processor type="nativeID"           field="nativeID"/>
                <processor type="baseFilename"       field="internalFilename"  newField="baseFilename"/>
                <processor type="stringSubstitution" field="sequence"          replacedField="sequence_li"          search="I" replace="L"/>
                <processor type="stringSubstitution" field="modified_sequence" replacedField="modified_sequence_li" search="I" replace="L"/>
            </processors>
        </data>
        <row>
            <column type="integer" field="PSM_ID"            label="PSM ID"           width="3"  tooltip="PSM ID from within the source MzTab file"/>
            <column type="text"    field="#SpecFile"         label="Peak List File"   width="12" tooltip="The name of the peak list file from which this spectrum came, as referenced from within the source MzTab file"/>
            <column type="integer" field="nativeID_index"    label="Index"            width="3"  tooltip="Spectrum index (0-based) in the file."/>
            <column type="integer" field="nativeID_scan"     label="Scan"             width="3"  tooltip="Spectrum scan number"/>
            <column type="text"    field="modified_sequence" label="Modified Peptide" width="18" tooltip="The modified peptide sequence matched to this spectrum"/>
            <column type="text"    field="modifications"     label="Modifications"  width="18" tooltip="The positions and accessions of all post-translational modifications found for this spectrum identification"/>
            <column type="text"    field="accession"         label="Protein"          width="18" tooltip="The accession of the protein matched to this spectrum"/>
            <column type="integer" field="charge"            label="Charge"           width="1"  tooltip="Precursor ion charge"/>
            <column type="text"    field="search_engine"     label="Search Engine"    width="12" tooltip="Search engine used to generate this identification"/>
            <column type="text"    field="valid"             label="Valid"            width="7"  tooltip="If a spectrum could not be found in the source peak list file, or if the identification contains any ambiguous PTM references, then it will be marked as &quot;INVALID&quot;."/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="20" width="600" height="500">
                <parameter name="file"      file="[internalFilename]"/>
                <parameter name="scan"      value="[nativeID_scan]"/>
                <parameter name="index"     value="[nativeID_index_1-based]"/>
                <parameter name="peptide"   value="[modified_sequence]"/>
                <parameter name="modformat" value="inspect"/>
                <parameter name="trim"      value="true"/>
            </column>
        </row>
    </block>
    
    <!-- Protein views -->
    <view id="group_by_protein" display="hidden">
        <blockRef id="main" type="protein_list"/>
    </view>
    <view id="group_by_protein_derived" display="hidden">
        <blockRef id="main" type="protein_list"/>
    </view>
    <block id="protein_list" type="table_ss">
        <data>
            <source type="file" name="{file}"/>
            <parsers>
                <parser type="mzTab"/>
                <parser type="unrolledTabular" unrollBy="accession" fieldDelimiter=";"/>
                <parser type="groupedTabular"  groupBy="accession"/>
                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="mzTab"/>
                <processor type="protein"      field="accession"/>
                <processor type="peptideCount" field="modified_sequence"/>
            </processors>
        </data>
        <row>
            <column type="view" view="protein_details" field="accession" label="Protein" width="18" preload="Yes">
                <parameter name="file"    value="{file}"/>
                <parameter name="protein" value="[accession]"/>
            </column>
            <column type="integer" field="Hits"     label="PSMs"                       width="2"/>
            <column type="integer" field="Peptides" label="Unique Unmodified Peptides" width="2"/>
            <column type="integer" field="Modified" label="Unique Modified Peptides"   width="2"/>
        </row>
        <row expander="down:up">
            <column type="block" block="spectra_per_protein" colspan="5">
                <parameter name="file"    value="{file}"/>
                <parameter name="protein" value="[accession]"/>
            </column>
        </row>
    </block>
    
    <view id="protein_details" display="hidden">
        <blockRef id="title" type="protein_title"/>
        <blockRef id="main"  type="spectra_per_protein"/>
    </view>
    <block id="protein_title" type="title">
        <data><source type="value" value="Protein {protein}"/></data>
    </block>
    <block id="spectra_per_protein" type="table_ss">
        <data>
            <source type="file" name="{file}"/>
            <parsers>
                <parser type="mzTab"/>
                <parser type="unrolledTabular" unrollBy="accession" fieldDelimiter=";"/>
                <parser type="slicedTabular"   groupBy="accession"  sliceBy="{protein}"/>
                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="mzTab"/>
                <processor type="fileDescriptor"     field="#SpecFile"/>
                <processor type="nativeID"           field="nativeID"/>
                <processor type="baseFilename"       field="internalFilename"  newField="baseFilename"/>
                <processor type="stringSubstitution" field="sequence"          replacedField="sequence_li"          search="I" replace="L"/>
                <processor type="stringSubstitution" field="modified_sequence" replacedField="modified_sequence_li" search="I" replace="L"/>
            </processors>
        </data>
        <row>
            <column type="integer" field="PSM_ID"            label="PSM ID"         width="3"  tooltip="PSM ID from within the source MzTab file"/>
            <column type="text"    field="#SpecFile"         label="Peak List File" width="12" tooltip="The name of the peak list file from which this spectrum came, as referenced from within the source MzTab file"/>
            <column type="integer" field="nativeID_index"    label="Index"          width="3"  tooltip="Spectrum index (0-based) in the file."/>
            <column type="integer" field="nativeID_scan"     label="Scan"           width="3"  tooltip="Spectrum scan number"/>
            <column type="text"    field="modified_sequence" label="Peptide"        width="18" tooltip="The modified peptide sequence matched to this spectrum"/>
            <column type="text"    field="modifications"     label="Modifications"  width="18" tooltip="The positions and accessions of all post-translational modifications found for this spectrum identification"/>
            <column type="integer" field="charge"            label="Charge"         width="1"  tooltip="Precursor ion charge"/>
            <column type="text"    field="search_engine"     label="Search Engine"  width="12" tooltip="Search engine used to generate this identification"/>
            <column type="text"    field="valid"             label="Valid"          width="7"  tooltip="If a spectrum could not be found in the source peak list file, or if the identification contains any ambiguous PTM references, then it will be marked as &quot;INVALID&quot;."/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="20" width="600" height="500">
                <parameter name="file"      file="[internalFilename]"/>
                <parameter name="scan"      value="[nativeID_scan]"/>
                <parameter name="index"     value="[nativeID_index_1-based]"/>
                <parameter name="peptide"   value="[modified_sequence]"/>
                <parameter name="modformat" value="inspect"/>
                <parameter name="trim"      value="true"/>
            </column>
        </row>
    </block>

    <block id="pair_mod_counts" type="table_ss">
        <data>
            <source type="file" name="pairModificationTable/"/>
            <parsers>
                <parser type="tabular"/>
                                <parser type="SQLite"/>
            </parsers>
        </data>
        <row>
                        <!--<column type="integer"        field="Mass_offset"    label="Mass Offset"    width="3" />-->
                        <column label="Mass Offset" type="genericurlgenerator" width="12" field="Mass_offset" tooltip="Mass offset of modification on either peptide in spectral network pair"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="identified_network_pairs"/>\
                            <parameter name="HASHPARAMTER=All_offsets_input" value=",[Mass_offset],"/>\
                            <parameter name="LABEL" value="[Mass_offset]"/>\
                            <parameter name="USETASK" value="True"/>\
                        </column>
                        <column type="integer" field="Cos&lt;0.45"     label="Cos &lt; .45"     width="5" tooltip="Cosine of spectral network pair is less than 0.45"/>
                        <column type="integer" field="0.45&lt;=Cos&lt;0.55"     label=".45 &lt;= Cos &lt; .55"     width="5" tooltip="Cosine of spectral network pair is between 0.45 and 0.55"/>
                        <column type="integer" field="0.55&lt;=Cos&lt;0.65"     label=".55 &lt;= Cos &lt; .65"     width="5" tooltip="Cosine of spectral network pair is between 0.55 and 0.65"/>
                        <column type="integer" field="0.65&lt;=Cos&lt;0.75"     label=".65 &lt;= Cos &lt; .75"     width="5" tooltip="Cosine of spectral network pair is between 0.65 and 0.75"/>
                        <column type="integer" field="0.75&lt;=Cos&lt;0.85"     label=".75 &lt;= Cos &lt; .85"     width="5" tooltip="Cosine of spectral network pair is between 0.75 and 0.85"/>
                        <column type="integer" field="0.85&lt;=Cos&lt;0.95"     label=".85 &lt;= Cos &lt; .95"     width="5" tooltip="Cosine of spectral network pair is between 0.85 and 0.95"/>
                        <column type="integer" field="Cos&gt;=0.95"     label="Cos &gt;= .95"     width="5" tooltip="Cosine of spectral network pair is at least 0.95"/>
        </row>
    </block>
    
    <!-- PTM views -->
    <view id="group_by_ptm" display="hidden">
        <blockRef id="main" type="ptm_list"/>
    </view>
    <block id="ptm_list" type="table_ss">
        <data>
            <source type="file" name="{file}"/>
            <parsers>
                <parser type="mzTab"/>
                <parser type="unrolledTabular" unrollBy="mod_set" fieldDelimiter="|"/>
                <parser type="groupedTabular"  groupBy="mod_set"/>
                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="mzTab"/>
                <processor type="peptideCount" field="modified_sequence"/>
            </processors>
        </data>
        <row>
            <column type="view" view="ptm_details" field="mod_set" label="Post-Translational Modifications" width="18" preload="Yes">
                <parameter name="file"       value="{file}"/>
                <parameter name="mod_set"    value="[mod_set]"/>
                <parameter name="null_label" value="None"/>
            </column>
            <column type="integer" field="Hits"     label="PSMs with this Modification"                       width="2"/>
            <column type="integer" field="Peptides" label="Unique Unmodified Peptides" width="2"/>
            <column type="integer" field="Modified" label="Unique Modified Peptides"   width="2"/>
        </row>
    </block>
    
    <view id="ptm_details" display="hidden">
        <blockRef id="title" type="ptm_title"/>
        <blockRef id="main"  type="spectra_per_ptm"/>
    </view>
    <block id="ptm_title" type="title">
        <data>
            <source type="value"
                value="Post-Translational Modifications: {mod_set}"/>
        </data>
    </block>
    <block id="spectra_per_ptm" type="table_ss">
        <data>
            <source type="file" name="{file}"/>
            <parsers>
                <parser type="mzTab"/>
                <parser type="unrolledTabular" unrollBy="mod_set" fieldDelimiter="|"/>
                <parser type="slicedTabular"   groupBy="mod_set"  sliceBy="{mod_set}"/>
                <parser type="SQLite"/>
            </parsers>
            <processors>
                <processor type="mzTab"/>
                <processor type="fileDescriptor"     field="#SpecFile"/>
                <processor type="nativeID"           field="nativeID"/>
                <processor type="baseFilename"       field="internalFilename"  newField="baseFilename"/>
                <processor type="stringSubstitution" field="sequence"          replacedField="sequence_li"          search="I" replace="L"/>
                <processor type="stringSubstitution" field="modified_sequence" replacedField="modified_sequence_li" search="I" replace="L"/>
            </processors>
        </data>
        <row>
            <column type="integer" field="PSM_ID"            label="PSM ID"           width="3"  tooltip="PSM ID from within the source MzTab file"/>
            <column type="text"    field="#SpecFile"         label="Peak List File"   width="12" tooltip="The name of the peak list file from which this spectrum came, as referenced from within the source MzTab file"/>
            <column type="integer" field="nativeID_index"    label="Index"            width="3"  tooltip="Spectrum index (0-based) in the file."/>
            <column type="integer" field="nativeID_scan"     label="Scan"             width="3"  tooltip="Spectrum scan number"/>
            <column type="text"    field="modified_sequence" label="Modified Peptide" width="18" tooltip="The modified peptide sequence matched to this spectrum"/>
            <column type="text"    field="modifications"     label="Modifications"  width="18" tooltip="The positions and accessions of all post-translational modifications found for this spectrum identification"/>
            <column type="text"    field="accession"         label="Protein"          width="18" tooltip="The accession of the protein matched to this spectrum"/>
            <column type="integer" field="charge"            label="Charge"           width="1"  tooltip="Precursor ion charge"/>
            <column type="text"    field="search_engine"     label="Search Engine"    width="12" tooltip="Search engine used to generate this identification"/>
            <column type="text"    field="valid"             label="Valid"            width="7"  tooltip="If a spectrum could not be found in the source peak list file, or if the identification contains any ambiguous PTM references, then it will be marked as &quot;INVALID&quot;."/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" colspan="20" width="600" height="500">
                <parameter name="file"      file="[internalFilename]"/>
                <parameter name="scan"      value="[nativeID_scan]"/>
                <parameter name="index"     value="[nativeID_index_1-based]"/>
                <parameter name="peptide"   value="[modified_sequence]"/>
                <parameter name="modformat" value="inspect"/>
                <parameter name="trim"      value="true"/>
            </column>
        </row>
    </block>
    <!-- END standard mzTab result view specifications -->

  <block id="combined_bsaap_regions" type="table_ss">
    <data>
      <source type="file" name="combinedPsmVariantFdrWithRegs/peptide_regions.txt"/>
      <parsers>
        <parser type="sortedTabular" sortBy="RegionNum" operator="descending"/>
        <parser type="SQLite"/>
      </parsers>
    </data>
    <row>
      <column type="integer"     field="RegionNum"        label="Protein Region Index"          width="2"     tooltip="Index of peptide variant region on the protein"/>
-->
      <!--<column type="text"        field="RegionAnno"       label="PVR Anno"        width="18"    tooltip="Peptide variant region on the protein"/>-->
                        <column label="Protein Region" type="genericurlgenerator" width="12" field="RegionAnno" tooltip="Peptide variant region on the protein"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="identified_variants_merged_protein_regions"/>\
                            <parameter name="HASHPARAMTER=Protein_region_input" value="[RegionAnno]"/>\
                            <parameter name="LABEL" value="[RegionAnno]"/>\
                            <parameter name="USETASK" value="True"/>\
                        </column>
      <column type="text"        field="Protein"          label="Protein"         width="18"    tooltip="Protein name"/>
    <column type="integer"     field="RegionCount"      label="Variant Count"  width="2"     tooltip="Number of peptide variants mapping to this protein region"/>
      <column type="integer"     field="Start"            label="Start AA"           width="2"     tooltip="Start amino acid on protein"/>
      <column type="integer"     field="End"              label="End AA"             width="2"     tooltip="End amino acid on protein"/>
    </row>
  </block>


<block id="download_clustered_spectra" type="dummydownload">
	          <data>
	            <source type="file" name="spectra/specs_ms.mgf"/>
	             <parsers>
	                <parser type="stream" contentType="text/xml"/>
	            </parsers>
	          </data>
</block>

<block id="download_mztab" type="dummydownload">
	          <data>
	            <!--<source type="folder" name="mzTab/"/>-->
	            <source type="file" name="mzTab_zip/"/>
	             <parsers>
	                <parser type="stream" contentType="text/xml"/>
	            </parsers>
	          </data>
</block>

      <block id="spectra_per_var_group_overall" type="table">
                <data>
                        <source type="file" name="spectrumCounts_specFdr_sepMixtures/"/>
                        <parsers>
                                <parser type="slicedTabular" groupBy="Peptide_variant_group" sliceBy="{vargroup}"/>
                        </parsers>
                        <processors>
                                <processor type="protein" field="Protein"/>
                        </processors>
                </data>
    <row>
    <column type="text" field="Filename"     label="Filename"     width="15" tooltip="Name of clusters file if &quot;Run MS Cluster&quot; was selected; otherwise original input spectra filename"/>
    <column type="view" view="all_clusters_sliced_by_cluster_index" field="Cluster_index" label="Cluster Index" width="18" tooltip="Index of cluster in clusters file. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected">
    <parameter name="cluster index"   value="[Cluster_index]"/>
    </column>
    <column type="integer" field="Cluster_charge"     label="Cluster Charge"     width="7" tooltip="Charge assigned to cluster"/>
    <column type="text" field="Algorithm"     label="Algorithm"     width="15" tooltip="Algorithm that identified this cluster. MSPLIT2 means M-SPLIT identified this as the second component of a peptide mixture"/>
      <column type="integer"     field="Peptide_variant_group"     label="Variant Group"  width="5"     tooltip="ID assigned to group of peptides with the same unmodified sequence and total mass within the parent mass tolerance of each other"/>
    <column type="text" field="Peptide"     label="Peptide-Spectrum Match (PSM)"     width="15" tooltip="Peptide identification of this cluster"/>
    <column type="integer" field="Charge"     label="PSM Charge"     width="7" tooltip="Charge assigned by algorithm that identified this cluster"/>
      <column type="float"       field="FDR"              label="PSM FDR"        precision="5" tooltip="Cluster-level false discovery rate"/>
      <column type="float"       field="Variant_FDR"              label="Variant FDR"        precision="5" tooltip="Variant-level false discovery rate"/>
    <column type="text" field="Unmodified_sequence"     label="Unmodified Sequence"     width="15" tooltip="Peptide sequence with modifications excluded"/>
    <column type="float" field="Parent_mass"     label="Parent Mass"     width="7" precision="3"/>
      <column type="expandable"        field="Protein_region"    label="Protein Region(s)"   width="18"    tooltip="Peptide variant region on the protein"/>
    <column type="expandable"       field="Proteins"           label="Protein(s)"             width="10" tooltip="Proteins in input database containing peptide sequence of this PSM"/>
    <column type="view" view="spec_fams_sliced_by_comp_index" field="Spectral_network" label="Spectral Network" width="15" tooltip="ID of network component containing this cluster, if this cluster is in a network">
        <parameter name="compindex"   value="[Spectral_network]"/>
    </column>
    <column type="integer" field="Num_network_neighbors"     label="# Network Neighbors"     width="7" tooltip="Number of immediately-adjacent clusters in spectral network component containing this cluster, if this cluster is in a network"/>
    <column type="integer" field="Num_spectra_for_cluster"     label="# Spectra"     width="7" tooltip="Number of spectra in this cluster"/>
    <column type="integer" field="Num_spectra_for_peptide_variant"     label="# Spectra for Variant"     width="7" tooltip="Number of spectra in clusters assigned the same variant group as this cluster"/>
    <column type="text" field="Default_groups"     label="Default Groups"     width="15" tooltip="Default groups (G1 through G6 on input form) containing files containing spectra in this cluster"/>
    <column type="text" field="User-defined_groups"     label="User-Defined Groups"     width="15" tooltip="User groups (specified in file uploaded to &quot;Group Mapping&quot; section of input form) containing files containing spectra in this cluster"/>
      <!--<column type="text"        field="Protein"          label="Protein"    width="30"    tooltip="Protein name"/>-->
      <column type="integer"     field="Start_AA"          label="Start AA"      width="1"     tooltip="Start amino acid on protein"/>
      <column type="integer"     field="End_AA"            label="End AA"        width="1"     tooltip="End amino acid on protein"/>
      <column type="expandable"     field="Protein_region_indices" label="Protein Region Index(es)"        width="5"    tooltip="Index of peptide variant region on the protein"/>
      <column type="integer"     field="Num_peptide_mods"          label="# Mods"    width="1"     tooltip="Number of modifications on peptide"/>
      <column type="text" field="All_peptide_mods"     label="All Mods"     width="7" tooltip="Peptide modifications present, rounded to the nearest integer"/>
      <!--      <column type="exponential" field="p-value"          label="SpecProb"   precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;peptide&lt;/b&gt; with a score equal to or exceeding the observed score"/>-->
      <!--<column type="integer"     field="matchOrientation" label="Orient"     width="1"     tooltip="Match orientation"/>-->
    <!--<column type="integer" field="Num_spectra_for_protein"     label="Protein Spectrum Count"     width="7"/>-->
        <column type="integer" field="Num_G1_spectra_for_cluster"     label=" # Spectra G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 1"/>
        <column type="integer" field="Num_G2_spectra_for_cluster"     label="# Spectra G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 2"/>
        <column type="integer" field="Num_G3_spectra_for_cluster"     label="# Spectra G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 3"/>
        <column type="integer" field="Num_G4_spectra_for_cluster"     label="# Spectra G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 4"/>
        <column type="integer" field="Num_G5_spectra_for_cluster"     label="# Spectra G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 5"/>
        <column type="integer" field="Num_G6_spectra_for_cluster"     label="# Spectra G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 6"/>
    </row>
    <row expander="image">
        <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
        <parameter name="file"    file="spectra/specs_ms.mgf"/>
        <parameter name="scan"    value="[Cluster_index]"/>
        <parameter name="compoundname" value="*..*"/>
        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
        </column>
    </row>
        </block>


   <!--Overall group by protein--> 
    <block id="protein_list_overall" type="table_ss">
        <data>
                        <source type="file" name="spectrumCounts_varFdr_proteins/"/>
                        <parsers>
                                <parser type="representativeTabular" groupBy="Protein"/>
                                <parser type="SQLite"/>
                        </parsers>
            <processors>
                <processor type="protein" field="Protein"/>
            </processors>
                </data>

            <row>
                <column type="text"        field="Protein"          label="Protein"    width="30"    tooltip="Protein name"/>
                <column type="expandable"        field="Adjacent_proteins"          label="Adjacent Proteins"    width="30"    tooltip="Proteins that have one or more peptides in common with this protein"/>
                        <!--<column label="Protein" type="genericurlgenerator" width="12" field="Protein"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="clustersNew_spectrumFdr_sepMixtures"/>\
                            <parameter name="HASHPARAMTER=Proteins_input" value="[Protein]"/>\
                            <parameter name="LABEL" value="[Protein]"/>\
                            <parameter name="USETASK" value="True"/>\
                        </column>-->
                <column type="integer" field="Num_network_neighbors_for_protein"     label="Sum Neighbors"     width="7" tooltip="Sum of the number of clusters in spectral networks immediately adjacent to each of the clusters whose peptide identification maps to this protein"/>
                        <column type="integer" field="Num_spectra_for_protein"     label="# Spectra"     width="7" tooltip="Number of spectra in clusters whose peptide identification maps to this protein"/>
                        <column type="integer" field="Num_unique_spectra_for_protein"     label="# Unique Spectra"     width="7" tooltip="Number of spectra in clusters whose peptide identification maps ONLY to this protein (i.e., does not map to any other proteins)"/>
                        <column type="integer" field="Num_G1_spectra_for_protein"     label="# Spectra G1"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 1"/>
                        <column type="integer" field="Num_unique_G1_spectra_for_protein"     label="# Unique Spectra G1"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps ONLY to this protein in files assigned to default group 1"/>
                        <column type="integer" field="Num_G2_spectra_for_protein"     label="# Spectra G2"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 2"/>
                        <column type="integer" field="Num_unique_G2_spectra_for_protein"     label="# Unique Spectra G2"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps ONLY to this protein in files assigned to default group 2"/>
                        <column type="integer" field="Num_G3_spectra_for_protein"     label="# Spectra G3"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 3"/>
                        <column type="integer" field="Num_unique_G3_spectra_for_protein"     label="# Unique Spectra G3"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps ONLY to this protein in files assigned to default group 3"/>
                        <column type="integer" field="Num_G4_spectra_for_protein"     label="# Spectra G4"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 4"/>
                        <column type="integer" field="Num_unique_G4_spectra_for_protein"     label="# Unique Spectra G4"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps ONLY to this protein in files assigned to default group 4"/>
                        <column type="integer" field="Num_G5_spectra_for_protein"     label="# Spectra G5"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 5"/>
                        <column type="integer" field="Num_unique_G5_spectra_for_protein"     label="# Unique Spectra G5"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps ONLY to this protein in files assigned to default group 5"/>
                        <column type="integer" field="Num_G6_spectra_for_protein"     label="# Spectra G6"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 6"/>
                        <column type="integer" field="Num_unique_G6_spectra_for_protein"     label="# Unique Spectra G6"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps ONLY to this protein in files assigned to default group 6"/>
            <column type="text" field="Outlier_default_group_for_protein"     label="Outlier Group"    width="15" tooltip="Default group with the largest absolute outlier group ratio"/>
                        <column type="float" field="Outlier_default_group_ratio_for_protein"     label="Outlier Group Ratio"     width="2" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a default group to the second-highest number of spectra in a default group, or the lowest number of spectra in a default group to the second-lowest number of spectra in a default group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity. Considers all peptides mapping to the protein."/>
            <column type="text" field="Outlier_default_group_for_protein-uniquely-mapping_proteins"     label="Unique Outlier Group"    width="15" tooltip="Default group with the largest absolute unique outlier group ratio"/>
                        <column type="float" field="Outlier_default_group_ratio_for_protein-uniquely-mapping_proteins"     label="Unique Outlier Group Ratio"     width="2" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a default group to the second-highest number of spectra in a default group, or the lowest number of spectra in a default group to the second-lowest number of spectra in a default group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity. Considers only peptides that map uniquely to the protein."/>
 
            <column type="expandable" field="Outlier_user_group_for_protein"     label="Outlier User Group"    width="15" tooltip="User-defined group with the largest absolute outlier group ratio"/>
                        <column type="float" field="Outlier_user_group_ratio_for_protein"     label="Outlier User Group Ratio"     width="2" precision="2"  tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a user-defined group to the second-highest number of spectra in a user-defined group, or the lowest number of spectra in a user-defined group to the second-lowest number of spectra in a user-defined group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity. Considers all peptides mapping to the protein."/>
            <column type="expandable" field="Outlier_user_group_for_protein-uniquely-mapping_proteins"     label="Unique Outlier User Group"    width="15" tooltip="User-defined group with the largest absolute unique outlier group ratio"/>
                        <column type="float" field="Outlier_user_group_ratio_for_protein-uniquely-mapping_proteins"     label="Unique Outlier User Group Ratio"     width="2" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a user-defined group to the second-highest number of spectra in a user-defined group, or the lowest number of spectra in a user-defined group to the second-lowest number of spectra in a user-defined group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity. Considers only peptides that map uniquely to the protein."/>
      <column type="expandable"        field="DrugBank_drugs"          label="Associated Drugs"         width="18" tooltip="Drugs that interact with this protein, via DrugBank. Delimited by vertical bars." autoHideSentinel="false"/>
                        <column type="integer" field="Num_spectra_for_protein-top_proteins"     label="# Spectra- Top Proteins"     width="7" tooltip="Number of spectra in clusters whose peptide identification maps to this protein, considering only the top protein for each spectrum"/>
                <column type="integer" field="Num_G1_spectra_for_protein-top_proteins"     label="# Spectra G1- Top Proteins"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 1, considering only the top protein for each spectrum"/>
                        <column type="integer" field="Num_G2_spectra_for_protein-top_proteins"     label="# Spectra G2- Top Proteins"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 2, considering only the top protein for each spectrum"/>
                        <column type="integer" field="Num_G3_spectra_for_protein-top_proteins"     label="# Spectra G3- Top Proteins"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 3, considering only the top protein for each spectrum"/>
                        <column type="integer" field="Num_G4_spectra_for_protein-top_proteins"     label="# Spectra G4- Top Proteins"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 4, considering only the top protein for each spectrum"/>
                        <column type="integer" field="Num_G5_spectra_for_protein-top_proteins"     label="# Spectra G5- Top Proteins"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 5, considering only the top protein for each spectrum"/>
                        <column type="integer" field="Num_G6_spectra_for_protein-top_proteins"     label="# Spectra G6- Top Proteins"     width="2" tooltip="Number of spectra in clusters whose peptide identification maps to this protein in files assigned to default group 6, considering only the top protein for each spectrum"/>
        </row>
                <!--<row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[Cluster_index]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                    </column>
                </row>-->
                <row expander="down:up">
                        <column type="block" block="variants_per_protein_overall" colspan="13">
                                <parameter name="protein" value="[Protein]"/>
                        </column>
                </row>
        </block>


        <block id="variants_per_protein_overall" type="table">
                <data>
                        <source type="file" name="spectrumCounts_regions/"/>
                        <parsers>
                                <parser type="slicedTabular" groupBy="Protein" sliceBy="{protein}"/>
                        </parsers>
                        <processors>
                                <processor type="protein" field="Protein"/>
                        </processors>
                </data>
    <row>
      <column type="integer"     field="Peptide_variant_group"        label="Variant Group"          width="5"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="Cluster_index" label="Cluster Index" width="18">
                        <parameter name="clusterindex"   value="[Cluster_index]"/>
                    </column>
    <column type="text" field="Peptide"     label="Peptide"     width="15"/>
      <column type="float"       field="Parent_mass_for_variant"              label="Parent Mass"    width="5"    precision="2"/>
      <column type="integer"     field="Charge"        label="Precursor Charge"          width="1"/>
      <column type="integer"     field="Num_peptide_mods"              label="# Mods"             width="1"     tooltip="Number of modifications on peptide"/>
    <column type="text" field="All_peptide_mods"     label="All Mods"     width="7"/>
      <column type="expandable"     field="Protein_region_indices"      label="Protein Region Index"  width="5" tooltip="Index of peptide variant region on the protein"/>
      <column type="text"        field="Protein_region"       label="Protein Region"        width="18"    tooltip="Peptide variant region on the protein"/>
      <column type="text"        field="Protein"          label="Protein"         width="18"/>
      <column type="integer"     field="Start_AA"            label="Start AA"           width="3"     tooltip="Start amino acid on protein"/>
      <column type="integer"     field="End_AA"              label="End AA"             width="3"     tooltip="End amino acid on protein"/>
    <column type="text" field="Unmodified_sequence"     label="Unmodified Sequence"     width="15"/>
      <!--<column type="exponential"     field="MQScore"         label="Q Score"      width="5"      precision="3"/>-->
      <column type="float"       field="FDR"              label="Variant FDR"        precision="5" tooltip="False discovery rate"/>
    <column type="expandable"       field="Proteins"           label="All Proteins"             width="10"/>
    <column type="integer" field="Num_network_neighbors_for_peptide_variant"     label="# Network Neighbors"     width="7"/>
    <column type="view" view="spec_fams_sliced_by_comp_index" field="Spectral_network" label="Spectral Network" width="15">
        <parameter name="compindex"   value="[Spectral_network]"/>
    </column>
    <column type="text" field="All_spectral_networks"     label="All Spectral Networks"     width="15"/>
    <!--<column type="float" field="Sum_offsets_mod_pep"     label="Sum Offsets"     width="7" precision="2"/>-->
    <column type="integer" field="Num_spectra_for_peptide_variant"     label="Variant Spectrum Count"     width="7"/>
    <column type="integer" field="Num_G1_spectra_for_peptide_variant"     label="G1 Spec Count"     width="2"/>
    <column type="integer" field="Num_G2_spectra_for_peptide_variant"     label="G2 Spec Count"     width="2"/>
    <column type="integer" field="Num_G3_spectra_for_peptide_variant"     label="G3 Spec Count"     width="2"/>
    <column type="integer" field="Num_G4_spectra_for_peptide_variant"     label="G4 Spec Count"     width="2"/>
    <column type="integer" field="Num_G5_spectra_for_peptide_variant"     label="G5 Spec Count"     width="2"/>
    <column type="integer" field="Num_G6_spectra_for_peptide_variant"     label="G6 Spec Count"     width="2"/>
    <column type="text" field="Outlier_default_group_for_peptide_variant"     label="Outlier Group"    width="15"/>
    <column type="float" field="Outlier_default_group_ratio_for_peptide_variant"     label="Outlier Group Ratio"     width="2" precision="2"/>
    <column type="expandable" field="Outlier_user_group_for_peptide_variant"     label="Outlier User Group"    width="15"/>
    <column type="float" field="Outlier_default_group_ratio_for_peptide_variant"     label="Outlier User Group Ratio"     width="5" precision="2"/>
    </row>
                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[Cluster_index]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                    </column>
                </row>
        </block>    


     <block id="spectra_per_protein_overall" type="table">
                <data>
                        <source type="file" name="spectrumCounts_specFdr_sepMixtures/"/>
                        <parsers>
                                <parser type="slicedTabular" groupBy="Protein" sliceBy="{protein}"/>
                        </parsers>
                        <processors>
                                <processor type="protein" field="Protein"/>
                        </processors>
                </data>
    <row>
    <column type="text" field="Filename"     label="Filename"     width="15" tooltip="Name of clusters file if &quot;Run MS Cluster&quot; was selected; otherwise original input spectra filename"/>
    <column type="view" view="all_clusters_sliced_by_cluster_index" field="Cluster_index" label="Cluster Index" width="18" tooltip="Index of cluster in clusters file. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected">
    <parameter name="cluster index"   value="[Cluster_index]"/>
    </column>
    <column type="integer" field="Cluster_charge"     label="Cluster Charge"     width="7" tooltip="Charge assigned to cluster"/>
    <column type="text" field="Algorithm"     label="Algorithm"     width="15" tooltip="Algorithm that identified this cluster. MSPLIT2 means M-SPLIT identified this as the second component of a peptide mixture"/>
      <column type="integer"     field="Peptide_variant_group"     label="Variant Group"  width="5"     tooltip="ID assigned to group of peptides with the same unmodified sequence and total mass within the parent mass tolerance of each other"/>
    <column type="text" field="Peptide"     label="Peptide-Spectrum Match (PSM)"     width="15" tooltip="Peptide identification of this cluster"/>
    <column type="integer" field="Charge"     label="PSM Charge"     width="7" tooltip="Charge assigned by algorithm that identified this cluster"/>
      <column type="float"       field="FDR"              label="PSM FDR"        precision="5" tooltip="Cluster-level false discovery rate"/>
      <column type="float"       field="Variant_FDR"              label="Variant FDR"        precision="5" tooltip="Variant-level false discovery rate"/>
    <column type="text" field="Unmodified_sequence"     label="Unmodified Sequence"     width="15" tooltip="Peptide sequence with modifications excluded"/>
    <column type="float" field="Parent_mass"     label="Parent Mass"     width="7" precision="3"/>
      <column type="text"        field="Protein_region"    label="Protein Region(s)"   width="18"    tooltip="Peptide variant region on the protein"/>
    <column type="expandable"       field="Proteins"           label="Protein(s)"             width="10" tooltip="Proteins in input database containing peptide sequence of this PSM"/>
    <column type="view" view="spec_fams_sliced_by_comp_index" field="Spectral_network" label="Spectral Network" width="15" tooltip="ID of network component containing this cluster, if this cluster is in a network">
        <parameter name="compindex"   value="[Spectral_network]"/>
    </column>
    <column type="integer" field="Num_network_neighbors"     label="# Network Neighbors"     width="7" tooltip="Number of immediately-adjacent clusters in spectral network component containing this cluster, if this cluster is in a network"/>
    <column type="integer" field="Num_spectra_for_cluster"     label="# Spectra"     width="7" tooltip="Number of spectra in this cluster"/>
    <column type="integer" field="Num_spectra_for_peptide_variant"     label="# Spectra for Variant"     width="7" tooltip="Number of spectra in clusters assigned the same variant group as this cluster"/>
    <column type="text" field="Default_groups"     label="Default Groups"     width="15" tooltip="Default groups (G1 through G6 on input form) containing files containing spectra in this cluster"/>
    <column type="text" field="User-defined_groups"     label="User-Defined Groups"     width="15" tooltip="User groups (specified in file uploaded to &quot;Group Mapping&quot; section of input form) containing files containing spectra in this cluster"/>
      <!--<column type="text"        field="Protein"          label="Protein"    width="30"    tooltip="Protein name"/>-->
      <column type="integer"     field="Start_AA"          label="Start AA"      width="1"     tooltip="Start amino acid on protein"/>
      <column type="integer"     field="End_AA"            label="End AA"        width="1"     tooltip="End amino acid on protein"/>
      <column type="expandable"     field="Protein_region_indices" label="Protein Region Index(es)"        width="5"     tooltip="Index of peptide variant region on the protein"/>
      <column type="integer"     field="Num_peptide_mods"          label="# Mods"    width="1"     tooltip="Number of modifications on peptide"/>
      <column type="text" field="All_peptide_mods"     label="All Mods"     width="7" tooltip="Peptide modifications present, rounded to the nearest integer"/>
      <!--      <column type="exponential" field="p-value"          label="SpecProb"   precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;peptide&lt;/b&gt; with a score equal to or exceeding the observed score"/>-->
      <!--<column type="integer"     field="matchOrientation" label="Orient"     width="1"     tooltip="Match orientation"/>-->
    <!--<column type="integer" field="Num_spectra_for_protein"     label="Protein Spectrum Count"     width="7"/>-->
        <column type="integer" field="Num_G1_spectra_for_cluster"     label=" # Spectra G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 1"/>
        <column type="integer" field="Num_G2_spectra_for_cluster"     label="# Spectra G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 2"/>
        <column type="integer" field="Num_G3_spectra_for_cluster"     label="# Spectra G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 3"/>
        <column type="integer" field="Num_G4_spectra_for_cluster"     label="# Spectra G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 4"/>
        <column type="integer" field="Num_G5_spectra_for_cluster"     label="# Spectra G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 5"/>
        <column type="integer" field="Num_G6_spectra_for_cluster"     label="# Spectra G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 6"/>
    </row>
        </block>    


       <block id="view_all_cluster_peptide_identifications_component_sliced" type="table">
                <data>
                        <source type="file" name="spectrumCounts_specFdr_sepMixtures/"/>
                    <parsers>
                                <parser type="representativeTabular" groupBy="Cluster_index"/>
                                <parser type="slicedTabular" groupBy="Spectral_network" sliceBy="{componentindex}"/>
                        </parsers>
                <processors>
                                <processor type="protein"        field="Protein"/>
                        </processors>
                </data>
    <row>
    <column type="text" field="Filename"     label="Filename"     width="15" tooltip="Name of clusters file if &quot;Run MS Cluster&quot; was selected; otherwise original input spectra filename"/>
    <column type="view" view="all_clusters_sliced_by_cluster_index" field="Cluster_index" label="Cluster Index" width="18" tooltip="Index of cluster in clusters file. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected">
    <parameter name="cluster index"   value="[Cluster_index]"/>
    </column>
    <column type="integer" field="Cluster_charge"     label="Cluster Charge"     width="7" tooltip="Charge assigned to cluster"/>
    <column type="text" field="Algorithm"     label="Algorithm"     width="15" tooltip="Algorithm that identified this cluster. MSPLIT2 means M-SPLIT identified this as the second component of a peptide mixture"/>
      <column type="integer"     field="Peptide_variant_group"     label="Variant Group"  width="5"     tooltip="ID assigned to group of peptides with the same unmodified sequence and total mass within the parent mass tolerance of each other"/>
    <column type="text" field="Peptide"     label="Peptide-Spectrum Match (PSM)"     width="15" tooltip="Peptide identification of this cluster"/>
    <column type="integer" field="Charge"     label="PSM Charge"     width="7" tooltip="Charge assigned by algorithm that identified this cluster"/>
      <column type="float"       field="FDR"              label="PSM FDR"        precision="5" tooltip="Cluster-level false discovery rate"/>
      <column type="float"       field="Variant_FDR"              label="Variant FDR"        precision="5" tooltip="Variant-level false discovery rate"/>
    <column type="text" field="Unmodified_sequence"     label="Unmodified Sequence"     width="15" tooltip="Peptide sequence with modifications excluded"/>
    <column type="float" field="Parent_mass"     label="Parent Mass"     width="7" precision="3"/>
      <column type="text"        field="Protein_region"    label="Protein Region(s)"   width="18"    tooltip="Peptide variant region on the protein"/>
    <column type="expandable"       field="Proteins"           label="Protein(s)"             width="10" tooltip="Proteins in input database containing peptide sequence of this PSM"/>
    <column type="view" view="spec_fams_sliced_by_comp_index" field="Spectral_network" label="Spectral Network" width="15" tooltip="ID of network component containing this cluster, if this cluster is in a network">
        <parameter name="compindex"   value="[Spectral_network]"/>
    </column>
    <column type="integer" field="Num_network_neighbors"     label="# Network Neighbors"     width="7" tooltip="Number of immediately-adjacent clusters in spectral network component containing this cluster, if this cluster is in a network"/>
    <column type="integer" field="Num_spectra_for_cluster"     label="# Spectra"     width="7" tooltip="Number of spectra in this cluster"/>
    <column type="integer" field="Num_spectra_for_peptide_variant"     label="# Spectra for Variant"     width="7" tooltip="Number of spectra in clusters assigned the same variant group as this cluster"/>
    <column type="text" field="Default_groups"     label="Default Groups"     width="15" tooltip="Default groups (G1 through G6 on input form) containing files containing spectra in this cluster"/>
    <column type="text" field="User-defined_groups"     label="User-Defined Groups"     width="15" tooltip="User groups (specified in file uploaded to &quot;Group Mapping&quot; section of input form) containing files containing spectra in this cluster"/>
      <!--<column type="text"        field="Protein"          label="Protein"    width="30"    tooltip="Protein name"/>-->
      <column type="integer"     field="Start_AA"          label="Start AA"      width="1"     tooltip="Start amino acid on protein"/>
      <column type="integer"     field="End_AA"            label="End AA"        width="1"     tooltip="End amino acid on protein"/>
      <column type="expandable"     field="Protein_region_indices" label="Protein Region Index(es)"        width="5"     tooltip="Index of peptide variant region on the protein"/>
      <column type="integer"     field="Num_peptide_mods"          label="# Mods"    width="1"     tooltip="Number of modifications on peptide"/>
      <column type="text" field="All_peptide_mods"     label="All Mods"     width="7" tooltip="Peptide modifications present, rounded to the nearest integer"/>
      <!--      <column type="exponential" field="p-value"          label="SpecProb"   precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;peptide&lt;/b&gt; with a score equal to or exceeding the observed score"/>-->
      <!--<column type="integer"     field="matchOrientation" label="Orient"     width="1"     tooltip="Match orientation"/>-->
    <!--<column type="integer" field="Num_spectra_for_protein"     label="Protein Spectrum Count"     width="7"/>-->
        <column type="integer" field="Num_G1_spectra_for_cluster"     label=" # Spectra G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 1"/>
        <column type="integer" field="Num_G2_spectra_for_cluster"     label="# Spectra G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 2"/>
        <column type="integer" field="Num_G3_spectra_for_cluster"     label="# Spectra G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 3"/>
        <column type="integer" field="Num_G4_spectra_for_cluster"     label="# Spectra G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 4"/>
        <column type="integer" field="Num_G5_spectra_for_cluster"     label="# Spectra G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 5"/>
        <column type="integer" field="Num_G6_spectra_for_cluster"     label="# Spectra G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 6"/>
    </row>

                <row expander="image">
                    <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
                        <parameter name="file"    file="spectra/specs_ms.mgf"/>
                        <parameter name="scan"    value="[Cluster_index]"/>
                        <parameter name="compoundname" value="*..*"/>
                        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
                    </column>
                </row>
        </block>

   <!-- bsaap raven views-->
  <block id="combined_variant_merged_fdr_regions_new" type="table_ss">
    <data>
      <source type="file" name="spectrumCounts_mergedRegions/"/>
      <parsers>
        <parser type="sortedTabular" sortBy="Protein_region_indices" operator="descending"/>
        <parser type="SQLite"/>
      </parsers>
    </data>
    <row>
      <column type="integer"     field="Peptide_variant_group"        label="Variant Group"          width="5" tooltip="ID assigned to group of peptides with the same unmodified sequence and total mass within the parent mass tolerance of each other"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="Cluster_index" label="Cluster Index" width="18" tooltip="Index in clusters file of representative cluster for this variant. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected">
                        <parameter name="clusterindex"   value="[Cluster_index]"/>
                    </column>
       <column type="text" field="Peptide"     label="Peptide"     width="15" tooltip="Peptide identification of representative cluster"/>
      <column type="float"       field="Parent_mass_for_variant"              label="Parent Mass"    width="5"    precision="2"/>
      <column type="integer"     field="Charge"        label="Precursor Charge"          width="1" tooltip="Charge assigned to representative cluster"/>
      <column type="integer"     field="Num_peptide_mods"              label="# Mods"             width="1"     tooltip="Number of modifications on peptide in representative cluster PSM"/>
    <column type="text" field="All_peptide_mods"     label="All Mods"     width="7" tooltip="Modifications present in all peptides assigned to this variant group, rounded to the nearest integer"/>
      <column type="expandable"     field="Protein_region_indices"      label="Protein Region Index(es)"  width="5" tooltip="Index of peptide variant region on the protein"/>
      <column type="expandable"        field="Protein_region"       label="Protein Region(s)"        width="18"    tooltip="Peptide variant region on the protein"/>
      <!--<column type="expandable"        field="Protein"          label="Protein(s)"         width="18" tooltip="Protein name"/>-->
    <column type="text" field="Unmodified_sequence"     label="Unmodified Sequence"     width="15" tooltip="Peptide identification of representative cluster with modifications excluded"/>
      <!--<column type="exponential"     field="MQScore"         label="Q Score"      width="5"      precision="3"/>-->
      <column type="float"       field="FDR"              label="Variant FDR"        precision="5" tooltip="Variant-level false discovery rate"/>
    <column type="expandable"       field="Proteins"           label="Protein(s)"             width="10" tooltip="All proteins in input database containing sequence of representative cluster peptide identification"/>
    <column type="integer" field="Num_network_neighbors_for_peptide_variant"     label="# Network Neighbors"     width="7" tooltip="Sum of the number of clusters in spectral networks immediately adjacent to each of the clusters belonging to this variant group"/>
    <!--<column type="view" view="spec_fams_sliced_by_comp_index" field="Spectral_network" label="Spectral Network" width="15">
        <parameter name="compindex"   value="[Spectral_network]"/>
    </column>-->
    <!--<column type="text" field="All_spectral_networks"     label="All Spectral Networks"     width="15"/>-->
                        <column label="Spectral Network(s)" type="genericurlgenerator" width="12" field="All_spectral_networks" tooltip="IDs of network components containing any of the clusters belonging to this variant group"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="spectral_networks"/>\
                            <parameter name="HASHPARAMTER=VariantGroups_input" value=",[Peptide_variant_group],"/>\
                            <parameter name="LABEL" value="[All_spectral_networks]"/>\
                            <parameter name="USETASK" value="True"/>\
                        </column>
<!--    <column type="float" field="Sum_offsets_mod_pep"     label="Sum Offsets"     width="7" precision="2"/>-->
<column type="integer" field="Num_spectra_for_peptide_variant"     label="# Spectra"     width="7" tooltip="Number of spectra in clusters belonging to this variant group"/>
<column type="integer" field="Num_spectra_for_unmodified_sequence"     label="# Spectra for Unmodified Sequence"     width="7" tooltip="Number of spectra in clusters identified as this peptide sequence, ignoring modifications"/>
<column type="integer" field="Num_peptide_variants_for_unmodified_sequence"     label="# Variants for Unmodified Sequence"     width="7" tooltip="Number of peptide variants corresponding to this peptide sequence"/>
    <column type="integer" field="Num_G1_spectra_for_peptide_variant"     label="# Spectra G1"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 1"/>
    <column type="integer" field="Num_G2_spectra_for_peptide_variant"     label="# Spectra G2"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 2"/>
    <column type="integer" field="Num_G3_spectra_for_peptide_variant"     label="# Spectra G3"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 3"/>
    <column type="integer" field="Num_G4_spectra_for_peptide_variant"     label="# Spectra G4"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 4"/>
    <column type="integer" field="Num_G5_spectra_for_peptide_variant"     label="# Spectra G5"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 5"/>
    <column type="integer" field="Num_G6_spectra_for_peptide_variant"     label="# Spectra G6"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 6"/>
    <column type="text" field="Outlier_default_group_for_peptide_variant"     label="Outlier Group"    width="15" tooltip="Default group with the largest absolute outlier group ratio"/>
    <column type="float" field="Outlier_default_group_ratio_for_peptide_variant"     label="Outlier Group Ratio"     width="2" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a default group to the second-highest number of spectra in a default group, or the lowest number of spectra in a default group to the second-lowest number of spectra in a default group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity"/>
    <column type="expandable" field="Outlier_user_group_for_peptide_variant"     label="Outlier User Group"    width="15" tooltip="User-defined group with the largest absolute outlier group ratio"/>
    <column type="float" field="Outlier_default_group_ratio_for_peptide_variant"     label="Outlier User Group Ratio"     width="5" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a user-defined group to the second-highest number of spectra in a user-defined group, or the lowest number of spectra in a user-defined group to the second-lowest number of spectra in a user-defined group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity"/>
      <column type="expandable"        field="DrugBank_drugs"          label="Associated Drugs"         width="18" tooltip="Drugs that interact with this protein, via DrugBank. Delimited by vertical bars." autoHideSentinel="false"/>
    </row>
    <row expander="image">
        <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
        <parameter name="file"    file="spectra/specs_ms.mgf"/>
        <parameter name="scan"    value="[Cluster_index]"/>
        <parameter name="compoundname" value="*..*"/>
        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
        </column>
    </row>
        <row expander="down:up">
                <column type="block" block="spectra_per_var_group_overall" colspan="13">
                        <parameter name="vargroup" value="[Peptide_variant_group]"/>
                </column>
        </row>
  </block>


 <block id="combined_variant_fdr_regions_new" type="table_ss">
    <data>
      <source type="file" name="spectrumCounts_regions/"/>
      <parsers>
        <parser type="sortedTabular" sortBy="Protein_region_indices" operator="descending"/>
        <parser type="SQLite"/>
      </parsers>
    </data>
    <row>
      <column type="integer"     field="Peptide_variant_group"        label="Variant Group"          width="5" tooltip="ID assigned to group of peptides with the same unmodified sequence and total mass within the parent mass tolerance of each other"/>
                    <column type="view" view="clustersNew_spectrumFdr_sliced" field="Cluster_index" label="Cluster Index" width="18" tooltip="Index in clusters file of representative cluster for this variant. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected">
                        <parameter name="clusterindex"   value="[Cluster_index]"/>
                    </column>
    <column type="text" field="Peptide"     label="Peptide"     width="15" tooltip="Peptide identification of representative cluster"/>
      <column type="float"       field="Parent_mass_for_variant"              label="Parent Mass"    width="5"    precision="2"/>
      <column type="integer"     field="Charge"        label="Precursor Charge"          width="1" tooltip="Charge assigned to representative cluster"/>
      <column type="integer"     field="Num_peptide_mods"              label="# Mods"             width="1"     tooltip="Number of modifications on peptide in representative cluster PSM"/>
    <column type="text" field="All_peptide_mods"     label="All Mods"     width="7" tooltip="Modifications present in all peptides assigned to this variant group, rounded to the nearest integer" />
      <column type="expandable"     field="Protein_region_indices"      label="Protein Region Index"  width="5" tooltip="Index of peptide variant region on the protein"/>
      <column type="text"        field="Protein_region"       label="Protein Region"        width="18"    tooltip="Peptide variant region on the protein"/>
      <column type="text"        field="Protein"          label="Protein"         width="18" tooltip="Protein name"/>
      <column type="integer"     field="Start_AA"            label="Start AA"           width="3"     tooltip="Start amino acid on protein"/>
      <column type="integer"     field="End_AA"              label="End AA"             width="3"     tooltip="End amino acid on protein"/>
    <column type="text" field="Unmodified_sequence"     label="Unmodified Sequence"     width="15" tooltip="Peptide identification of representative cluster with modifications excluded"/>
      <!--<column type="exponential"     field="MQScore"         label="Q Score"      width="5"      precision="3"/>-->
      <column type="float"       field="FDR"              label="Variant FDR"        precision="5" tooltip="Variant-level false discovery rate"/>
    <column type="expandable"       field="Proteins"           label="All Proteins"             width="10" tooltip="All proteins in input database containing sequence of representative cluster peptide identification"/>
    <column type="integer" field="Num_network_neighbors_for_peptide_variant"     label="# Network Neighbors"     width="7" tooltip="Sum of the number of clusters in spectral networks immediately adjacent to each of the clusters belonging to this variant group"/>
    <!--<column type="view" view="spec_fams_sliced_by_comp_index" field="Spectral_network" label="Spectral Network" width="15">
        <parameter name="compindex"   value="[Spectral_network]"/>
    </column>-->
    <!--<column type="text" field="All_spectral_networks"     label="All Spectral Networks"     width="15"/>-->
                        <column label="Spectral Network(s)" type="genericurlgenerator" width="12" field="All_spectral_networks" tooltip="IDs of network components containing any of the clusters belonging to this variant group"> \
                            <parameter name="URLBASE" value="/ProteoSAFe/result.jsp"/>\
                            <parameter name="REQUESTPARAMETER=view" value="spectral_networks"/>\
                            <parameter name="HASHPARAMTER=VariantGroups_input" value=",[Peptide_variant_group],"/>\
                            <parameter name="LABEL" value="[All_spectral_networks]"/>\
                            <parameter name="USETASK" value="True"/>\
                        </column>
    <!--<column type="float" field="Sum_offsets_mod_pep"     label="Sum Offsets"     width="7" precision="2"/>-->
    <column type="integer" field="Num_spectra_for_peptide_variant"     label="# Spectra"     width="7" tooltip="Number of spectra in clusters belonging to this variant group"/>
<column type="integer" field="Num_spectra_for_unmodified_sequence"     label="# Spectra for Unmodified Sequence"     width="7" tooltip="Number of spectra in clusters identified as this peptide sequence, ignoring modifications"/>
<column type="integer" field="Num_peptide_variants_for_unmodified_sequence"     label="# Variants for Unmodified Sequence"     width="7" tooltip="Number of peptide variants corresponding to this peptide sequence"/>
    <column type="integer" field="Num_G1_spectra_for_peptide_variant"     label="# Spectra G1"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 1"/>
    <column type="integer" field="Num_G2_spectra_for_peptide_variant"     label="# Spectra G2"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 2"/>
    <column type="integer" field="Num_G3_spectra_for_peptide_variant"     label="# Spectra G3"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 3"/>
    <column type="integer" field="Num_G4_spectra_for_peptide_variant"     label="# Spectra G4"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 4"/>
    <column type="integer" field="Num_G5_spectra_for_peptide_variant"     label="# Spectra G5"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 5"/>
    <column type="integer" field="Num_G6_spectra_for_peptide_variant"     label="# Spectra G6"     width="2" tooltip="Number of spectra in clusters belonging to this variant group in files assigned to default group 6"/>
    <column type="text" field="Outlier_default_group_for_peptide_variant"     label="Outlier Group"    width="15" tooltip="Default group with the largest absolute outlier group ratio"/>
    <column type="float" field="Outlier_default_group_ratio_for_peptide_variant"     label="Outlier Group Ratio"     width="2" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a default group to the second-highest number of spectra in a default group, or the lowest number of spectra in a default group to the second-lowest number of spectra in a default group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity"/>
    <column type="expandable" field="Outlier_user_group_for_peptide_variant"     label="Outlier User Group"    width="15" tooltip="User-defined group with the largest absolute outlier group ratio"/>
    <column type="float" field="Outlier_default_group_ratio_for_peptide_variant"     label="Outlier User Group Ratio"     width="5" precision="2" tooltip="Base-2 logarithm of the ratio of the highest number of spectra in a user-defined group to the second-highest number of spectra in a user-defined group, or the lowest number of spectra in a user-defined group to the second-lowest number of spectra in a user-defined group, whichever has greater absolute value; 100 is used in place of infinity and -100 is used in place of negative infinity"/>
      <column type="text"        field="PSP_diseases"          label="PSP diseases"         width="18" tooltip="Diseases between the start and end amino acid on this protein, via PhosphoSitePlus database. Not for commercial use; see license at http://www.phosphosite.org/staticDownloads.action" autoHideSentinel="false"/>
      <column type="text"        field="PSP_regulatory_function"          label="PSP regulatory function"         width="18" tooltip="Regulatory functions between the start and end amino acid on this protein, via PhosphoSitePlus database. Not for commercial use; see license at http://www.phosphosite.org/staticDownloads.action" autoHideSentinel="false"/>
      <column type="text"        field="PSP_regulatory_interactions"          label="PSP regulatory interactions"         width="18" tooltip="Regulatory interactions between the start and end amino acid on this protein, via PhosphoSitePlus database. Not for commercial use; see license at http://www.phosphosite.org/staticDownloads.action" autoHideSentinel="false"/>
      <column type="text"        field="PSP_modifications"          label="PSP modifications"         width="18" tooltip="Modifications between the start and end amino acid on this protein, via PhosphoSitePlus database. Not for commercial use; see license at http://www.phosphosite.org/staticDownloads.action" autoHideSentinel="false"/>
      <column type="text"        field="PSP_PTM_variants"          label="PSP PTM variants"         width="18" tooltip="Post-translation modification variants between the start and end amino acid on this protein, via PhosphoSitePlus database. Not for commercial use; see license at http://www.phosphosite.org/staticDownloads.action" autoHideSentinel="false"/>
      <column type="text"        field="PSP_site_match"          label="PSP site match"         width="18" tooltip="The number of entries in PSP files for modified amino acids between the start and end amino acid. Not for commercial use; see license at http://www.phosphosite.org/staticDownloads.action" autoHideSentinel="false"/>
      <column type="expandable"        field="DrugBank_drugs"          label="Associated Drugs"         width="18" tooltip="Drugs that interact with this protein, via DrugBank. Delimited with vertical bars." autoHideSentinel="false"/>
         <column type="integer" field="Num_PSP_Drugbank_events"     label="# PSP/DrugBank Events"     width="2" tooltip="Number of non-N/A PSP and DrugBank columns"/>
       <column type="countNonNAPSPDrugBank" field="countNonNAPSPDrugBank" label="# PSP/DrugBank Events" width="3"/>
    </row>
    <row expander="image">
        <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
        <parameter name="file"    file="spectra/specs_ms.mgf"/>
        <parameter name="scan"    value="[Cluster_index]"/>
        <parameter name="compoundname" value="*..*"/>
        <parameter name="peptide" value="{?:peptide}[Peptide]"/>
        </column>
    </row>
    <row expander="down:up">
        <column type="block" block="spectra_per_var_group_overall" colspan="13">
            <parameter name="vargroup" value="[Peptide_variant_group]"/>
        </column>
    </row>
  </block>

   <block id="combined_spectrum_fdr_list_new" type="table_ss">
    <data>
      <source type="file" name="spectrumCounts_specFdr_sepMixtures/"/>
      <parsers>
    <parser type="sortedTabular" sortBy="Protein_region_indices" operator="descending"/>
        <parser type="SQLite"/>
      </parsers>
      <processors>
<!--
        <processor type="uploadFilename" field="#SpecFile"/>
-->       
        <processor type="protein"        field="Protein"/>
      </processors>
    </data>
    <row>
    <column type="text" field="Filename"     label="Filename"     width="15" tooltip="Name of clusters file if &quot;Run MS Cluster&quot; was selected; otherwise original input spectra filename"/>
    <column type="view" view="all_clusters_sliced_by_cluster_index" field="Cluster_index" label="Cluster Index" width="18" tooltip="Index of cluster in clusters file. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected">
    <parameter name="cluster index"   value="[Cluster_index]"/>
    </column>
    <column type="integer" field="Cluster_charge"     label="Cluster Charge"     width="7" tooltip="Charge assigned to cluster"/>
    <column type="text" field="Algorithm"     label="Algorithm"     width="15" tooltip="Algorithm that identified this cluster. MSPLIT2 means M-SPLIT identified this as the second component of a peptide mixture"/>
      <column type="integer"     field="Peptide_variant_group"     label="Variant Group"  width="5"     tooltip="ID assigned to group of peptides with the same unmodified sequence and total mass within the parent mass tolerance of each other"/>
    <column type="text" field="Peptide"     label="Peptide-Spectrum Match (PSM)"     width="15" tooltip="Peptide identification of this cluster"/>
    <column type="integer" field="Charge"     label="PSM Charge"     width="7" tooltip="Charge assigned by algorithm that identified this cluster"/>
      <column type="float"       field="FDR"              label="PSM FDR"        precision="5" tooltip="Cluster-level false discovery rate"/>
      <column type="float"       field="Variant_FDR"              label="Variant FDR"        precision="5" tooltip="Variant-level false discovery rate"/>
    <column type="text" field="Unmodified_sequence"     label="Unmodified Sequence"     width="15" tooltip="Peptide sequence with modifications excluded"/>
    <column type="float" field="Parent_mass"     label="Parent Mass"     width="7" precision="3"/>
      <column type="text"        field="Protein_region"    label="Protein Region(s)"   width="18"    tooltip="Peptide variant region on the protein"/>
    <column type="expandable"       field="Proteins"           label="Protein(s)"             width="10" tooltip="Proteins in input database containing peptide sequence of this PSM"/>
    <column type="view" view="spec_fams_sliced_by_comp_index" field="Spectral_network" label="Spectral Network" width="15" tooltip="ID of network component containing this cluster, if this cluster is in a network">
        <parameter name="compindex"   value="[Spectral_network]"/>
    </column>
    <column type="integer" field="Num_network_neighbors"     label="# Network Neighbors"     width="7" tooltip="Number of immediately-adjacent clusters in spectral network component containing this cluster, if this cluster is in a network"/>
    <column type="integer" field="Num_spectra_for_cluster"     label="# Spectra"     width="7" tooltip="Number of spectra in this cluster"/>
    <column type="integer" field="Num_spectra_for_peptide_variant"     label="# Spectra for Variant"     width="7" tooltip="Number of spectra in clusters assigned the same variant group as this cluster"/>
    <column type="text" field="Default_groups"     label="Default Groups"     width="15" tooltip="Default groups (G1 through G6 on input form) containing files containing spectra in this cluster"/>
    <column type="text" field="User-defined_groups"     label="User-Defined Groups"     width="15" tooltip="User groups (specified in file uploaded to &quot;Group Mapping&quot; section of input form) containing files containing spectra in this cluster"/>
      <!--<column type="text"        field="Protein"          label="Protein"    width="30"    tooltip="Protein name"/>-->
      <column type="integer"     field="Start_AA"          label="Start AA"      width="1"     tooltip="Start amino acid on protein"/>
      <column type="integer"     field="End_AA"            label="End AA"        width="1"     tooltip="End amino acid on protein"/>
      <column type="expandable"     field="Protein_region_indices" label="Protein Region Index(es)"        width="5"     tooltip="Index of peptide variant region on the protein"/>
      <column type="integer"     field="Num_peptide_mods"          label="# Mods"    width="1"     tooltip="Number of modifications on peptide"/>
      <column type="text" field="All_peptide_mods"     label="All Mods"     width="7" tooltip="Peptide modifications present, rounded to the nearest integer"/>
      <!--      <column type="exponential" field="p-value"          label="SpecProb"   precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;peptide&lt;/b&gt; with a score equal to or exceeding the observed score"/>-->
      <!--<column type="integer"     field="matchOrientation" label="Orient"     width="1"     tooltip="Match orientation"/>-->
    <!--<column type="integer" field="Num_spectra_for_protein"     label="Protein Spectrum Count"     width="7"/>-->
        <column type="integer" field="Num_G1_spectra_for_cluster"     label=" # Spectra G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 1"/>
        <column type="integer" field="Num_G2_spectra_for_cluster"     label="# Spectra G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 2"/>
        <column type="integer" field="Num_G3_spectra_for_cluster"     label="# Spectra G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 3"/>
        <column type="integer" field="Num_G4_spectra_for_cluster"     label="# Spectra G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 4"/>
        <column type="integer" field="Num_G5_spectra_for_cluster"     label="# Spectra G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 5"/>
        <column type="integer" field="Num_G6_spectra_for_cluster"     label="# Spectra G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 6"/>
      <column type="expandable"        field="DrugBank_drugs"          label="Associated Drugs"         width="18" tooltip="Drugs that interact with this protein, via DrugBank. Delimited by vertical bars." autoHideSentinel="false"/>
    </row>
    <row expander="image">
        <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
            <parameter name="file"    file="spectra/specs_ms.mgf"/>
            <parameter name="scan"    value="[Cluster_index]"/>
            <parameter name="compoundname" value="*..*"/>
            <parameter name="peptide" value="{?:peptide}[Peptide]"/>
        </column>
    </row>
        <row expander="down:up">
                <column type="block" block="spectra_per_cluster_overall" colspan="13">
                        <parameter name="clusterindex" value="[Cluster_index]"/>
                </column>
        </row>
  </block>


   <block id="combined_spectrum_fdr_list_new_sliced" type="table">
            <data>
                        <source type="file" name="spectrumCounts_specFdr_sepMixtures/"/>
                        <parsers>
                <parser type="slicedTabular" groupBy="Cluster_index"   sliceBy="{clusterindex}"/>
                        </parsers>
                </data>
   <row>
    <column type="text" field="Filename"     label="Filename"     width="15" tooltip="Name of clusters file if &quot;Run MS Cluster&quot; was selected; otherwise original input spectra filename"/>
    <column type="view" view="all_clusters_sliced_by_cluster_index" field="Cluster_index" label="Cluster Index" width="18" tooltip="Index of cluster in clusters file. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected">
    <parameter name="cluster index"   value="[Cluster_index]"/>
    </column>
    <column type="integer" field="Cluster_charge"     label="Cluster Charge"     width="7" tooltip="Charge assigned to cluster"/>
    <column type="text" field="Algorithm"     label="Algorithm"     width="15" tooltip="Algorithm that identified this cluster. MSPLIT2 means M-SPLIT identified this as the second component of a peptide mixture"/>
      <column type="integer"     field="Peptide_variant_group"     label="Variant Group"  width="5"  tooltip="ID assigned to group of peptides with the same unmodified sequence and total mass within the parent mass tolerance of each other"/>
    <column type="text" field="Peptide"     label="Peptide-Spectrum Match (PSM)"     width="15" tooltip="Peptide identification of this cluster"/>
    <column type="integer" field="Charge"     label="PSM Charge"     width="7" tooltip="Charge assigned by algorithm that identified this cluster"/>
      <column type="float"       field="FDR"              label="PSM FDR"        precision="5" tooltip="Cluster-level false discovery rate"/>
      <column type="float"       field="Variant_FDR"              label="Variant FDR"        precision="5" tooltip="Variant-level false discovery rate"/>
    <column type="text" field="Unmodified_sequence"     label="Unmodified Sequence"     width="15" tooltip="Peptide sequence with modifications excluded"/>
    <column type="float" field="Parent_mass"     label="Parent Mass"     width="7" precision="3"/>
      <column type="text"        field="Protein_region"    label="Protein Region(s)"   width="18"    tooltip="Peptide variant region on the protein"/>
    <column type="expandable"       field="Proteins"           label="Protein(s)"             width="10" tooltip="Proteins in input database containing peptide sequence of this PSM"/>
    <column type="view" view="spec_fams_sliced_by_comp_index" field="Spectral_network" label="Spectral Network" width="15" tooltip="ID of network component containing this cluster, if this cluster is in a network">
        <parameter name="compindex"   value="[Spectral_network]"/>
    </column>
    <column type="integer" field="Num_network_neighbors"     label="# Network Neighbors"     width="7" tooltip="Number of immediately-adjacent clusters in spectral network component containing this cluster, if this cluster is in a network"/>
    <column type="integer" field="Num_spectra_for_cluster"     label="# Spectra"     width="7" tooltip="Number of spectra in this cluster"/>
    <column type="integer" field="Num_spectra_for_peptide_variant"     label="# Spectra for Variant"     width="7" tooltip="Number of spectra in clusters assigned the same variant group as this cluster"/>
    <column type="text" field="Default_groups"     label="Default Groups"     width="15" tooltip="Default groups (G1 through G6 on input form) containing files containing spectra in this cluster"/>
    <column type="text" field="User-defined_groups"     label="User-Defined Groups"     width="15" tooltip="User groups (specified in file uploaded to &quot;Group Mapping&quot; section of input form) containing files containing spectra in this cluster"/>
      <!--<column type="text"        field="Protein"          label="Protein"    width="30"    tooltip="Protein name"/>-->
      <column type="integer"     field="Start_AA"          label="Start AA"      width="1"     tooltip="Start amino acid on protein"/>
      <column type="integer"     field="End_AA"            label="End AA"        width="1"     tooltip="End amino acid on protein"/>
      <column type="expandable"     field="Protein_region_indices" label="Protein Region Index(es)"        width="5"   tooltip="Index of peptide variant region on the protein"/>
      <column type="integer"     field="Num_peptide_mods"          label="# Mods"    width="1"     tooltip="Number of modifications on peptide"/>
      <column type="text" field="All_peptide_mods"     label="All Mods"     width="7" tooltip="Peptide modifications present, rounded to the nearest integer"/>
      <!--      <column type="exponential" field="p-value"          label="SpecProb"   precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;peptide&lt;/b&gt; with a score equal to or exceeding the observed score"/>-->
      <!--<column type="integer"     field="matchOrientation" label="Orient"     width="1"     tooltip="Match orientation"/>-->
    <!--<column type="integer" field="Num_spectra_for_protein"     label="Protein Spectrum Count"     width="7"/>-->
        <column type="integer" field="Num_G1_spectra_for_cluster"     label=" # Spectra G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 1"/>
        <column type="integer" field="Num_G2_spectra_for_cluster"     label="# Spectra G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 2"/>
        <column type="integer" field="Num_G3_spectra_for_cluster"     label="# Spectra G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 3"/>
        <column type="integer" field="Num_G4_spectra_for_cluster"     label="# Spectra G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 4"/>
        <column type="integer" field="Num_G5_spectra_for_cluster"     label="# Spectra G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 5"/>
        <column type="integer" field="Num_G6_spectra_for_cluster"     label="# Spectra G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 6"/>
    </row>
    <row expander="image">
        <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
            <parameter name="file"    file="spectra/specs_ms.mgf"/>
            <parameter name="scan"    value="[Cluster_index]"/>
            <parameter name="compoundname" value="*..*"/>
            <parameter name="peptide" value="{?:peptide}[Peptide]"/>
        </column>
    </row>
  </block>

 <block id="combined_spectrum_fdr_list_sepMixtures_new" type="table_ss">
    <data>
      <source type="file" name="spectrumCounts_specFdr_sepMixtures/"/>
      <parsers>
    <parser type="sortedTabular" sortBy="Protein_region_indices" operator="descending"/>
        <parser type="SQLite"/>
      </parsers>
      <processors>
<!--
        <processor type="uploadFilename" field="#SpecFile"/>
-->       
        <processor type="protein"        field="Protein"/>
      </processors>
    </data>
    <row>
    <column type="text" field="Filename"     label="Filename"     width="15" tooltip="Name of clusters file if &quot;Run MS Cluster&quot; was selected; otherwise original input spectra filename"/>
    <column type="view" view="all_clusters_sliced_by_cluster_index" field="Cluster_index" label="Cluster Index" width="18" tooltip="Index of cluster in clusters file. Similar spectra are clustered together via MS Cluster if &quot;Run MS Cluster&quot; was selected">
    <parameter name="cluster index"   value="[Cluster_index]"/>
    </column>
    <column type="integer" field="Cluster_charge"     label="Cluster Charge"     width="7" tooltip="Charge assigned to cluster"/>
    <column type="text" field="Algorithm"     label="Algorithm"     width="15" tooltip="Algorithm that identified this cluster. MSPLIT2 means M-SPLIT identified this as the second component of a peptide mixture"/>
      <column type="integer"     field="Peptide_variant_group"     label="Variant Group"  width="5"  tooltip="ID assigned to group of peptides with the same unmodified sequence and total mass within the parent mass tolerance of each other"/>
    <column type="text" field="Peptide"     label="Peptide-Spectrum Match (PSM)"     width="15" tooltip="Peptide identification of this cluster"/>
    <column type="integer" field="Charge"     label="PSM Charge"     width="7" tooltip="Charge assigned by algorithm that identified this cluster"/>
      <column type="float"       field="FDR"              label="PSM FDR"        precision="5" tooltip="Cluster-level false discovery rate"/>
      <column type="float"       field="Variant_FDR"              label="Variant FDR"        precision="5" tooltip="Variant-level false discovery rate"/>
    <column type="text" field="Unmodified_sequence"     label="Unmodified Sequence"     width="15" tooltip="Peptide sequence with modifications excluded"/>
    <column type="float" field="Parent_mass"     label="Parent Mass"     width="7" precision="3"/>
      <column type="text"        field="Protein_region"    label="Protein Region(s)"   width="18"    tooltip="Peptide variant region on the protein"/>
    <column type="expandable"       field="Proteins"           label="Protein(s)"             width="10" tooltip="Proteins in input database containing peptide sequence of this PSM"/>
    <column type="view" view="spec_fams_sliced_by_comp_index" field="Spectral_network" label="Spectral Network" width="15" tooltip="ID of network component containing this cluster, if this cluster is in a network">
        <parameter name="compindex"   value="[Spectral_network]"/>
    </column>
    <column type="integer" field="Num_network_neighbors"     label="# Network Neighbors"     width="7" tooltip="Number of immediately-adjacent clusters in spectral network component containing this cluster, if this cluster is in a network"/>
    <column type="integer" field="Num_spectra_for_cluster"     label="# Spectra"     width="7" tooltip="Number of spectra in this cluster"/>
    <column type="integer" field="Num_spectra_for_peptide_variant"     label="# Spectra for Variant"     width="7" tooltip="Number of spectra in clusters assigned the same variant group as this cluster"/>
    <column type="text" field="Default_groups"     label="Default Groups"     width="15" tooltip="Default groups (G1 through G6 on input form) containing files containing spectra in this cluster"/>
    <column type="text" field="User-defined_groups"     label="User-Defined Groups"     width="15" tooltip="User groups (specified in file uploaded to &quot;Group Mapping&quot; section of input form) containing files containing spectra in this cluster"/>
      <!--<column type="text"        field="Protein"          label="Protein"    width="30"    tooltip="Protein name"/>-->
      <column type="integer"     field="Start_AA"          label="Start AA"      width="1"     tooltip="Start amino acid on protein"/>
      <column type="integer"     field="End_AA"            label="End AA"        width="1"     tooltip="End amino acid on protein"/>
      <column type="expandable"     field="Protein_region_indices" label="Protein Region Index(es)"        width="5"    tooltip="Index of peptide variant region on the protein"/>
      <column type="integer"     field="Num_peptide_mods"          label="# Mods"    width="1"     tooltip="Number of modifications on peptide"/>
      <column type="text" field="All_peptide_mods"     label="All Mods"     width="7" tooltip="Peptide modifications present, rounded to the nearest integer"/>
      <!--      <column type="exponential" field="p-value"          label="SpecProb"   precision="1" tooltip="Probability that a spectrum matches a random &lt;b&gt;peptide&lt;/b&gt; with a score equal to or exceeding the observed score"/>-->
      <!--<column type="integer"     field="matchOrientation" label="Orient"     width="1"     tooltip="Match orientation"/>-->
    <!--<column type="integer" field="Num_spectra_for_protein"     label="Protein Spectrum Count"     width="7"/>-->
        <column type="integer" field="Num_G1_spectra_for_cluster"     label=" # Spectra G1"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 1"/>
        <column type="integer" field="Num_G2_spectra_for_cluster"     label="# Spectra G2"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 2"/>
        <column type="integer" field="Num_G3_spectra_for_cluster"     label="# Spectra G3"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 3"/>
        <column type="integer" field="Num_G4_spectra_for_cluster"     label="# Spectra G4"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 4"/>
        <column type="integer" field="Num_G5_spectra_for_cluster"     label="# Spectra G5"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 5"/>
        <column type="integer" field="Num_G6_spectra_for_cluster"     label="# Spectra G6"     width="2" tooltip="Number of spectra in this cluster in files assigned to default group 6"/>
    </row>
    <row expander="image">
        <column type="jscolumnspectrumviewer" colspan="5" label="Query" width="550" height="350">
            <parameter name="file"    file="spectra/specs_ms.mgf"/>
            <parameter name="scan"    value="[Cluster_index]"/>
            <parameter name="compoundname" value="*..*"/>
            <parameter name="peptide" value="{?:peptide}[Peptide]"/>
        </column>
    </row>
  </block>
  
</interface>



